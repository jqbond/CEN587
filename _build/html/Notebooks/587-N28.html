
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Optimization &#8212; Kinetics and Reaction Engineering</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Notebooks/587-N28';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Lectures" href="../Chapter2.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/JQB.png" class="logo__image only-light" alt="Kinetics and Reaction Engineering - Home"/>
    <script>document.write(`<img src="../_static/JQB.png" class="logo__image only-dark" alt="Kinetics and Reaction Engineering - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Welcome to CEN 587!
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../Chapter2.html">Lectures</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Optimization</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/jqbond/CEN587/main?urlpath=tree/Notebooks/587-N28.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Binder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Binder logo" src="../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/jqbond/CEN587" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/jqbond/CEN587/issues/new?title=Issue%20on%20page%20%2FNotebooks/587-N28.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/Notebooks/587-N28.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Optimization</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#review-flow-reactors-in-series">Review: Flow Reactors in Series</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#achieving-90-conversion-in-a-single-flow-reactor">Achieving 90% conversion in a single flow reactor</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-levenspiel-plot-for-this-system">A Levenspiel Plot for this system</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#if-we-use-2-cstrs-instead-of-1-cstr-the-total-volume-required-is-lower">If we use 2 CSTRs instead of 1 CSTR, the total volume required is lower…</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-problem-01-what-is-the-optimum-intermediate-conversion">Example Problem 01: What is the optimum intermediate conversion?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#define-an-objective-function">Define an objective function</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#graph-the-objective-function">Graph the objective function!</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#minimizing-the-objective-function-analytically">Minimizing the objective function analytically</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#minimizing-the-objective-function-numerically">Minimizing the objective function numerically</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-problem-02">Example Problem 02</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#solution-to-example-problem-02">Solution to Example Problem 02</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="optimization">
<h1>Optimization<a class="headerlink" href="#optimization" title="Link to this heading">#</a></h1>
<p>This Notebook provides an introduction to the concept of <em><strong>optimization</strong></em> in reactor design. So far, the material presented in this course might give us the impression that we’ll always be told what the target is in our design problem. For example, we have to this point seen many questions of the form:</p>
<ol class="arabic simple">
<li><p>How long should this reaction occur in a batch reactor to achieve 75% conversion of the limiting reactant?</p></li>
<li><p>How large (volume) should the flow reactor (CSTR or PFR) be to acheive 60% conversion of the limiting reactant?</p></li>
<li><p>What conversion of the limiting reactant will be achieved after 15 minutes in a batch reactor?</p></li>
<li><p>What conversion of the limiting reactant will be achieved in a 12L CSTR or a 22L PFR?</p></li>
</ol>
<p>More frequently, we might find that we are the experts on reactor design, and we may instead have to answer questions like:</p>
<ol class="arabic simple">
<li><p>How long should we let this reaction occur in a batch reactor?</p></li>
<li><p>How large should the flow reactor be?</p></li>
</ol>
<p>Implicit in these questions is the idea that there is going to be a “best” answer, and that we, by virtue of our training, need to be able to determine what the best way to run the reactor will be. This is where the idea of optimization comes in. We will often want to accomplish things like maximizing profit, minimizing cost, minimizing waste product formation, minimizing reactor size, etc. This is a slightly different approach to problem solving in that, to this point, we have essentially solved algebraic equations to find their roots, and we’ve solved differntial equations using analytical solutions, quadrature, and iterative, step-based numerical methods. Here, we want to find ways to determine the maximum or minimum value of a quantity of interest. Broadly speaking, this will require us to consider derivatives and gradients of functions as we will be looking for maxima and minima (where gradients and derivatives are equal to zero). In a parallel structure to prior Notebooks that discuss root finding for algebraic equations <a class="reference external" href="https://jqbond.github.io/CEN587/Notebooks/587-N02.html">Notebook 02</a> and methods for solving ordinary differential equations <a class="reference external" href="https://jqbond.github.io/CEN587/Notebooks/587-N19.html">Notebook 19</a>, we’ll discuss analytical solutions and iterative, numerical methods.  As a test case, we’ll build on the discussion of Levenspiel Plots in <a class="reference external" href="https://jqbond.github.io/CEN587/Notebooks/587-N25.html">Notebook 25</a> and <a class="reference external" href="https://jqbond.github.io/CEN587/Notebooks/587-N26.html">Notebook 26</a> as the graphical approaches there provide a nice visual illustration of optimization in reactor sizing.</p>
<p>For a more detailed discussion of the mathematical methods for optimization, you may wish to review <a class="reference external" href="https://jqbond.github.io/CEN587/Supplements/587-S10.html">Supplement 10 - Optimization of Univariate Functions</a> and <a class="reference external" href="https://jqbond.github.io/CEN587/Supplements/587-S11.html">Supplement 11 - Optimization of Multivariate Functions</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">scipy.optimize</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">opt</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy.integrate</span><span class="w"> </span><span class="kn">import</span> <span class="n">trapezoid</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">math</span><span class="w"> </span><span class="kn">import</span> <span class="n">ceil</span><span class="p">,</span> <span class="n">floor</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
</pre></div>
</div>
</div>
</div>
<section id="review-flow-reactors-in-series">
<h2>Review: Flow Reactors in Series<a class="headerlink" href="#review-flow-reactors-in-series" title="Link to this heading">#</a></h2>
<p>In <a class="reference external" href="https://jqbond.github.io/CEN587/Notebooks/587-N26.html">Notebook 26</a>, we considered the idea of sequencing for flow reactors. That is, we have considered whether it would be beneficial to use more than one flow reactor arranged in a sequence in order to accomplish a certain transformation. For now, we’re only considering reactors in series where the outflow from one is the inflow to the next. For now, we are only really concerned with concepts about how placing reactors in sequences affects the process. For consistency with the rest of the Levenspiel Plot discussion, we will continue to consider the following irreversible reaction involving two species:</p>
<div class="math notranslate nohighlight">
\[A \longrightarrow B\]</div>
<p>Again, whether we perform this reaction in a CSTR or a PFR, we will assume that the temperature, pressure, density, volume, and volumetric flowrates are constant with respect to time and position in the reactor. With these assumptions, we can write balances for the <span class="math notranslate nohighlight">\(n^{th}\)</span> reactor in that system. For reference, see <a class="reference external" href="https://jqbond.github.io/CEN587/Notebooks/587-N26.html">Notebook 26</a>, where we determined that if <strong>Reactor n</strong> is a CSTR, then its volume is:</p>
<div class="math notranslate nohighlight">
\[V_n = \frac {F_{A_f}(X_{A_n} - X_{A_{n-1}})}{r(X_{A_n})}\]</div>
<p>And if <strong>Reactor n</strong> is a PFR, then its volume is:</p>
<div class="math notranslate nohighlight">
\[V_n = \int_{X_{A_{n-1}}}^{X_{A_n}} \frac{F_{A_f}}{r(X_A)}dX_A\]</div>
<p>For the optimization discussion to follow, we will further simplify this system by considering only the cae of first order kinetics, i.e., <span class="math notranslate nohighlight">\(r = kC_A\)</span>. To complete numerical evaluation of all problems, we will continue to work with the case where all parameters have a numerical value of 1, and the dimensions of intensive reaction rate are moles per liter per minute:</p>
<div class="amsmath math notranslate nohighlight" id="equation-bb1c47b9-b14f-412a-8f3f-3f3a41f02c25">
<span class="eqno">(1)<a class="headerlink" href="#equation-bb1c47b9-b14f-412a-8f3f-3f3a41f02c25" title="Permalink to this equation">#</a></span>\[\begin{align}
    k &amp;= 1 \ \textrm{min}^{-1} \\
    F_{A_f} &amp;= 1 \ \textrm{mol} \ \textrm{min}^{-1} \\
    C_{A_f} &amp;= 1 \ \textrm{mol} \ \textrm{L}^{-1} \\
\end{align}\]</div>
</section>
<section id="achieving-90-conversion-in-a-single-flow-reactor">
<h2>Achieving 90% conversion in a single flow reactor<a class="headerlink" href="#achieving-90-conversion-in-a-single-flow-reactor" title="Link to this heading">#</a></h2>
<p>First, we will determine the volume of a single CSTR and a single PFR required to achieve 90% conversion.  We solved this problem in <a class="reference external" href="https://jqbond.github.io/CEN587/Notebooks/587-N25.html">Notebook 25</a>, and we know that the answers should be:</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{align*}
    V_\mathrm{CSTR} &amp;= 9.00\mathrm{L} \\
    V_\mathrm{PFR} &amp;= 2.30\mathrm{L}
\end{align*}\]</div>
<p>Since we will be using the equations extensively, let’s review how we got these numbers. First, we know that, for a single reaction, the balances for the <span class="math notranslate nohighlight">\(n^{th}\)</span> CSTR and PFR can be written in terms of <span class="math notranslate nohighlight">\(X_A\)</span>:</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{align*}
    V_\mathrm{PFR} &amp;= \frac {F_{A_f}(X_{A_n} - X_{A_{n-1}})}{r(X_{A_n})} \\
    \\
    V_\mathrm{CSTR} &amp;= \int_{X_{A_{n-1}}}^{X_{A_n}} \frac{F_{A_f}}{r(X_A)}dX_A
\end{align*}\]</div>
<p>We have stated that for today’s analysis, all case studys will consider first order kinetics; as such:</p>
<div class="math notranslate nohighlight">
\[r = kC_A\]</div>
<p>For a constant density flow reactor operating at steady state, this can also be written as a function of <span class="math notranslate nohighlight">\(X_A\)</span>:</p>
<div class="math notranslate nohighlight">
\[r = kC_{Af}(1-X_A)\]</div>
<p>This result can be substituted into Volume expressions above to get:</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{align*}
    V_{CSTR} &amp;= \frac{F_{Af}(X_{A_n} - X_{A_{n-1}})}{kC_{A_f}(1 - X_{A_n})} \\
    \\
    V_{PFR} &amp;= \int_{X_{A_{n-1}}}^{X_{A_n}} \frac{F_{A_f}}{kC_{A_f}(1 - X_{A_n})}dX_A 
\end{align*}\]</div>
<p>Both of the following can be solved analytically. In this case, we know that the inlet conversion to a single reactor is <span class="math notranslate nohighlight">\(X_{A_{n-1}} = 0\)</span> and the exit conversion <span class="math notranslate nohighlight">\(X_{A_n} = 0.9\)</span>. We substitute this values where appropriate into each expression and solve for the numerical answers.</p>
<div class="math notranslate nohighlight">
\[V_{CSTR} = \frac{F_{Af}(X_{A_n} - X_{A_{n-1}})}{kC_{A_f}(1 - X_{A_n})} = \frac{F_{A_f}}{k C_{A_f}}\frac{0.9}{(1-0.9)} = 9.0 \textrm{L}\]</div>
<div class="math notranslate nohighlight">
\[V_{PFR} = \int_{X_{A_{n-1}}}^{X_{A_n}} \frac{F_{A_f}}{kC_{A_f}(1-X_A)}dX_A = -\frac{F_{A_f}}{k C_{A_f}}\ln{\left(\frac{1 - X_{A_n}}{1-X_{A_{n-1}}}\right)} = -\frac{F_{A_f}}{k C_{A_f}}\ln{(1 - 0.9)} = 2.30 \textrm{L}\]</div>
<p>Here are a couple of important takeaways:</p>
<ol class="arabic simple">
<li><p>Here, we used these expressions for a single reactor, where the inlet conversion <span class="math notranslate nohighlight">\(X_{A_{n-1}} = 0\)</span> and the exit conversion <span class="math notranslate nohighlight">\(X_{A_n} = 0.9\)</span>. But we can use these same results for any reactor in a sequence for any values of <span class="math notranslate nohighlight">\(X_{A_{n-1}} and \)</span>X_{A_{n}}. It is then useful to build functions using these models to evaluate the volume of the <span class="math notranslate nohighlight">\(n^{th}\)</span> flow reactor. This is shown in the next code cell, where we create lambda functions to calculate CSTR and PFR volumes.</p></li>
<li><p>Once we have these functions defined, we can use them to illustrate how the volume of a single reactor will change as we vary the exit conversion.</p></li>
<li><p>We see that both reactor types become larger as we increase the fractional conversion that the reactor must accomplish. This makes sense because reactor size scales direclty with the quantity of species converted inside of that reactor.</p></li>
<li><p>We see that CSTR volumes increase more strongly as a function of <span class="math notranslate nohighlight">\(X_A\)</span> than the corresponding PFR volumes. This also makes sense because reactor size scales inversely with the spatially averaged rate of average rate of reaction inside of the reactor. This is a positive order reaction, so rate decreases as conversion increases (and concentration of <span class="math notranslate nohighlight">\(A\)</span> decreases). We know that CSTRs are perfectly mixed and that the entire reactor volume operates at the relatively low exit concentration of <span class="math notranslate nohighlight">\(A\)</span>. At this condition, the rate of reaction is relatively low. This compares to the PFR with gradually transitions from feed concentration, <span class="math notranslate nohighlight">\(C_{Af}\)</span> to exit concentraiton, <span class="math notranslate nohighlight">\(0.1C_{Af}\)</span>. For positive order kinetics, the average rate of reaction in the CSTR will always be lower the average rate of reaction in the CSTR, so we will always observe that CSTR sizes are larger than PFR sizes (to accomplish an identical conversion).</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">FAf</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#mol/min</span>
<span class="n">CAf</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#mol/L</span>
<span class="n">k</span>   <span class="o">=</span> <span class="mi">1</span> <span class="c1">#1/min</span>

<span class="n">VCSTR</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">XAin</span><span class="p">,</span> <span class="n">XAout</span><span class="p">:</span> <span class="n">FAf</span><span class="o">/</span><span class="n">k</span><span class="o">/</span><span class="n">CAf</span><span class="o">*</span><span class="p">(</span><span class="n">XAout</span> <span class="o">-</span> <span class="n">XAin</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">XAout</span><span class="p">)</span>
<span class="n">VPFR</span>  <span class="o">=</span> <span class="k">lambda</span> <span class="n">XAin</span><span class="p">,</span> <span class="n">XAout</span><span class="p">:</span> <span class="o">-</span><span class="n">FAf</span><span class="o">/</span><span class="n">k</span><span class="o">/</span><span class="n">CAf</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">XAout</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">XAin</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;To achieve 90% conversion, we need a </span><span class="si">{</span><span class="n">VCSTR</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.9</span><span class="p">)</span><span class="si">:</span><span class="s1">3.2f</span><span class="si">}</span><span class="s1">L CSTR or a </span><span class="si">{</span><span class="n">VPFR</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.9</span><span class="p">)</span><span class="si">:</span><span class="s1">3.2f</span><span class="si">}</span><span class="s1">L PFR&#39;</span><span class="p">)</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>To achieve 90% conversion, we need a 9.00L CSTR or a 2.30L PFR
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Plotting single reactor VCSTR and VPFR as functions of exit conversion</span>
<span class="n">xspan</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">plt1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Comparison of PFR and CSTR volumes&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xspan</span><span class="p">,</span> <span class="n">VCSTR</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">xspan</span><span class="p">),</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="s1">&#39;solid&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;CSTR&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xspan</span><span class="p">,</span> <span class="n">VPFR</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">xspan</span><span class="p">),</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="s1">&#39;dashed&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;PFR&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Exit Conversion of A&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Volume of Reactor (L)&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/092ebba8d1ac621bf666c3adfe5727754899e032dfc1b2ec5cb4c01ef74334fd.png" src="../_images/092ebba8d1ac621bf666c3adfe5727754899e032dfc1b2ec5cb4c01ef74334fd.png" />
</div>
</div>
</section>
<section id="a-levenspiel-plot-for-this-system">
<h2>A Levenspiel Plot for this system<a class="headerlink" href="#a-levenspiel-plot-for-this-system" title="Link to this heading">#</a></h2>
<p>We can find the same result and gain a similar insight from a Levenspiel plot, where we present <span class="math notranslate nohighlight">\(\frac{F_{A_f}}{r(x_A)}\)</span> vs. <span class="math notranslate nohighlight">\(x_A\)</span>. For this first order reaction in a constant density system, we know that:</p>
<div class="math notranslate nohighlight">
\[\frac{F_{A_f}}{r(X_A)} = \frac{F_{A_f}}{k C_{A_f}}\frac{1}{1 - X_A}\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">LEV</span>  <span class="o">=</span> <span class="k">lambda</span> <span class="n">X</span><span class="p">:</span> <span class="n">FAf</span><span class="o">/</span><span class="n">k</span><span class="o">/</span><span class="n">CAf</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">X</span><span class="p">)</span>
<span class="n">VC</span>   <span class="o">=</span> <span class="n">LEV</span><span class="p">(</span><span class="mf">0.9</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mf">0.9</span> <span class="o">-</span> <span class="mf">0.0</span><span class="p">)</span>
<span class="n">VP</span>   <span class="o">=</span> <span class="n">trapezoid</span><span class="p">(</span><span class="n">LEV</span><span class="p">(</span><span class="n">xspan</span><span class="p">),</span> <span class="n">xspan</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;To achieve 90% conversion, we need a </span><span class="si">{</span><span class="n">VC</span><span class="si">:</span><span class="s1">3.2f</span><span class="si">}</span><span class="s1">L CSTR or a </span><span class="si">{</span><span class="n">VP</span><span class="si">:</span><span class="s1">3.2f</span><span class="si">}</span><span class="s1">L PFR&#39;</span><span class="p">)</span> 

<span class="n">plt2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xspan</span><span class="p">,</span> <span class="n">LEV</span><span class="p">(</span><span class="n">xspan</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hlines</span><span class="p">(</span><span class="n">LEV</span><span class="p">(</span><span class="mf">0.9</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="s1">&#39;dashed&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">LEV</span><span class="p">(</span><span class="mf">0.9</span><span class="p">),</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="s1">&#39;dashed&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">xspan</span><span class="p">,</span> <span class="n">LEV</span><span class="p">(</span><span class="n">xspan</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Fractional Conversion of A&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;FAf/r, L&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Levenspiel Plot for 1st Order Reaction&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>To achieve 90% conversion, we need a 9.00L CSTR or a 2.30L PFR
</pre></div>
</div>
<img alt="../_images/30ee292ab6ea5bb8fcc2f122ba41fb558c0f1f1a0b3a9b9e3bab8599f286c7bb.png" src="../_images/30ee292ab6ea5bb8fcc2f122ba41fb558c0f1f1a0b3a9b9e3bab8599f286c7bb.png" />
</div>
</div>
</section>
<section id="if-we-use-2-cstrs-instead-of-1-cstr-the-total-volume-required-is-lower">
<h2>If we use 2 CSTRs instead of 1 CSTR, the total volume required is lower…<a class="headerlink" href="#if-we-use-2-cstrs-instead-of-1-cstr-the-total-volume-required-is-lower" title="Link to this heading">#</a></h2>
<p>We also looked at how things change when we instead do this in multiple reactors; for example, if we decide to reach 90% total conversion of A in two CSTRs in series, with an intermediate conversion of 45%, we find:</p>
<div class="math notranslate nohighlight">
\[V_1 = \frac{F_{A_f}(X_{A_n} - X_{A_{n-1}})}{kC_{A_f}(1-X_{A_{n-1}})} = \frac{(0.45 - 0.00)}{(1 - 0.45)} \ \mathrm{L} = 0.82 \ \mathrm{L}\]</div>
<div class="math notranslate nohighlight">
\[V_2 = \frac{F_{A_f}(X_{A_n} - X_{A_{n-1}})}{kC_{A_f}(1-X_{A_{n-1}})} = \frac{(0.90 - 0.45)}{(1 - 0.90)} \ \mathrm{L} = 4.5 \ \mathrm{L}\]</div>
<div class="math notranslate nohighlight">
\[V_{\mathrm{total}} = V_1 + V_2 = 5.32 \ \mathrm{L}\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Vt</span> <span class="o">=</span> <span class="n">VCSTR</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.45</span><span class="p">)</span> <span class="o">+</span> <span class="n">VCSTR</span><span class="p">(</span><span class="mf">0.45</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;If we use two CSTRs with an intermediate conversion of XA1 = 0.45, the total volume required is </span><span class="si">{</span><span class="n">Vt</span><span class="si">:</span><span class="s1">4.2f</span><span class="si">}</span><span class="s1">L&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>If we use two CSTRs with an intermediate conversion of XA1 = 0.45, the total volume required is 5.32L
</pre></div>
</div>
</div>
</div>
<p>This scenario is illustrated in the Levenspiel Plot below. As we look at the respective sizes of the red rectangles (which corresponding to the volumes of CSTR 1 and CSTR 2), we might be wondering if an intermediate conversion of <span class="math notranslate nohighlight">\(X_{A_1} = 0.45\)</span> is <em>the best</em> intermediate conversion. By that, we mean is it the intermediate conversion that would result in the smallest total reactor volume? Almost certainly not. We picked <span class="math notranslate nohighlight">\(X_{A_1} = 0.45\)</span> arbitrarily for the purpose of illustrating a concept. It is very unlikely that we happened to pick the best possible option. In the cell below, you can adjust the intermediate fractional conversion exiting the first reactor. It is bound to the variable <code class="docutils literal notranslate"><span class="pre">XA1</span></code> in the code cell below. Try adjusting this value – the Levenspiel Plot and rectangles corresponding to the two CSTR volumes will adjust automatically, and the cell will display the total volume for any new value of <code class="docutils literal notranslate"><span class="pre">XA1</span></code>.</p>
<p>After a bit of trial and error, we can find that setting the intermediate conversion to <span class="math notranslate nohighlight">\(X_{A_1} \approx 0.7\)</span> gives a total reactor volume of <span class="math notranslate nohighlight">\(V \approx 4.3\mathrm{L}\)</span>. This is considerably smaller than the volume of <span class="math notranslate nohighlight">\(V = 5.3\mathrm{L}\)</span> we found for <span class="math notranslate nohighlight">\(X_{A_1} = 0.45\)</span></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">XAset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.90</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">XA1</span> <span class="o">=</span> <span class="mf">0.45</span>
<span class="n">XA2</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">XAset</span><span class="p">)</span>

<span class="n">VPT</span> <span class="o">=</span> <span class="n">VPFR</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">XA2</span><span class="p">)</span>
<span class="n">VC1</span> <span class="o">=</span> <span class="n">VCSTR</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">XA1</span><span class="p">)</span>
<span class="n">VC2</span> <span class="o">=</span> <span class="n">VCSTR</span><span class="p">(</span><span class="n">XA1</span><span class="p">,</span> <span class="n">XA2</span><span class="p">)</span>
<span class="n">VCT</span> <span class="o">=</span> <span class="n">VC1</span> <span class="o">+</span> <span class="n">VC2</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The total PFR volume required is  V = </span><span class="si">{</span><span class="n">VPT</span><span class="si">:</span><span class="s1">3.2f</span><span class="si">}</span><span class="s1">L&#39;</span><span class="p">)</span> 
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The total CSTR volume required is V = </span><span class="si">{</span><span class="n">VCT</span><span class="si">:</span><span class="s1">3.2f</span><span class="si">}</span><span class="s1">L&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Levenspiel Plot for 1st Order Reaction&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">XAset</span><span class="p">,</span> <span class="n">LEV</span><span class="p">(</span><span class="n">XAset</span><span class="p">),</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">XAset</span><span class="p">,</span> <span class="n">LEV</span><span class="p">(</span><span class="n">XAset</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span><span class="n">XA1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">LEV</span><span class="p">(</span><span class="n">XA2</span><span class="p">),</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="s1">&#39;dashed&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span><span class="n">XA2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">LEV</span><span class="p">(</span><span class="n">XA2</span><span class="p">),</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="s1">&#39;dashed&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hlines</span><span class="p">(</span><span class="n">LEV</span><span class="p">(</span><span class="n">XA2</span><span class="p">),</span> <span class="n">XA1</span><span class="p">,</span> <span class="n">XA2</span><span class="p">,</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="s1">&#39;dashed&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hlines</span><span class="p">(</span><span class="n">LEV</span><span class="p">(</span><span class="n">XA1</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">XA1</span><span class="p">,</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="s1">&#39;dashed&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;FAf/r (L)&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;XA&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The total PFR volume required is  V = 2.30L
The total CSTR volume required is V = 5.32L
</pre></div>
</div>
<img alt="../_images/452dc1af22adc63b19bc8f71fecbfbf6fdfb149b4d120883a9d4aa12eb97456d.png" src="../_images/452dc1af22adc63b19bc8f71fecbfbf6fdfb149b4d120883a9d4aa12eb97456d.png" />
</div>
</div>
</section>
<section id="example-problem-01-what-is-the-optimum-intermediate-conversion">
<h2>Example Problem 01: What is the optimum intermediate conversion?<a class="headerlink" href="#example-problem-01-what-is-the-optimum-intermediate-conversion" title="Link to this heading">#</a></h2>
<p>Our trial and error experimentation with the Levenspiel Plot above shows us pretty clearly that there is a better choice of intermediate conversion of <span class="math notranslate nohighlight">\(A\)</span> than <span class="math notranslate nohighlight">\(X_{A_1} = 0.45\)</span>, and we can estimate that the optimal value is probably near <span class="math notranslate nohighlight">\(X_{A_1} = 0.70\)</span>. Although that exercise is educational and easy to visualize, it is a rough optimum, and it isn’t yet clear to me that we have found <em><strong>the best</strong></em> intermediate conversion. it isn’t immediately clear how I should operate this process so that I have the smallest total possible CSTR volume. To do this, we want to be more mathematically rigorous. At this point, we will introduce the concept of an objective function for optimize.  In plain terms, this is a function that cacluates (and returns!) the <em><strong>quantity that we are trying to optimize as a function of the parameter we are trying to optimize with respect to</strong></em>. We should also establish that, in most cases, when we talk about “optimizing” a function, we really mean “minimizing” a function as most optimization algorithms are designed to find the smallest value of a function, not the largest value of a function.</p>
<section id="define-an-objective-function">
<h3>Define an objective function<a class="headerlink" href="#define-an-objective-function" title="Link to this heading">#</a></h3>
<p>In this particular instance of “optimization,” we are trying to minimize the total CSTR volume as a function of intermediate conversion, i.e., conversion exiting the first reactor, <span class="math notranslate nohighlight">\(X_{A_1}\)</span>.  A reasonable objective function is then going to be one that (1) takes <span class="math notranslate nohighlight">\(X_{A_1}\)</span> as its only argument and (2) returns total CSTR volume as its only output. For example:</p>
<div class="math notranslate nohighlight">
\[V(X_{A_1}) = \frac {F_{A_f} (X_{A_1} - X_{A_{0}} ) } {kC_{A_f}(1-X_{A_{1}})} + \frac {F_{A_f} (X_{A_2} - X_{A_{1}} ) } {kC_{A_f}(1-X_{A_{2}})} \]</div>
<p>It might look like it needs more inputs than just <span class="math notranslate nohighlight">\(X_{A_1}\)</span>, but for the specific problem we are considering, we know all of the constant values from the problem statement, and we know that <span class="math notranslate nohighlight">\(x_{A_0} = 0\)</span> and <span class="math notranslate nohighlight">\(x_{A_2} = 0.9\)</span>. We do not yet know the best value of <span class="math notranslate nohighlight">\(X_{A_1}\)</span>, so we pass it to the function as an argument.  Making these substitutions, we get the simplified objective function:</p>
<div class="math notranslate nohighlight">
\[V(X_{A_1}) = \frac{F_{A_f}}{kC_{A_f}} \left[ \frac {X_{A_1}}{(1-X_{A_{1}})} + \frac {(0.9 - X_{A_{1}} )} {0.1} \right] \]</div>
<p>We can now define that function in the cell below, and we’ll consider a few ways to analyze it.</p>
<section id="graph-the-objective-function">
<h4>Graph the objective function!<a class="headerlink" href="#graph-the-objective-function" title="Link to this heading">#</a></h4>
<p>We’ll start with an intuitive approach, which is to graph it!</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you have a univariate objective function or bivariate objective function, it is straightforward to visualize how the objective varies as a function of input arguments. In these cases, we should always try to graph the objective function as it is much more informative than having only an optimum value!</p>
</div>
<p>From the graph below, we can see pretty clearly that the objective, total CSTR volume, has a minimum near <span class="math notranslate nohighlight">\(X_{A_1} = 0.7\)</span>. This is consistent with our conclusion from trial-and-error variation of intermediate conversion using a Levenspiel Plot.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">objective1</span><span class="p">(</span><span class="n">X</span><span class="p">):</span>
    <span class="n">FAf</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#mol/min</span>
    <span class="n">CAf</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#mol/L</span>
    <span class="n">k</span>   <span class="o">=</span> <span class="mi">1</span> <span class="c1">#1/min    </span>
    <span class="n">V</span> <span class="o">=</span> <span class="n">FAf</span><span class="o">/</span><span class="n">k</span><span class="o">/</span><span class="n">CAf</span><span class="o">*</span><span class="p">(</span><span class="n">X</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">X</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="mf">0.9</span> <span class="o">-</span> <span class="n">X</span><span class="p">)</span><span class="o">/</span><span class="mf">0.1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">V</span>
<span class="n">xspan</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

<span class="n">V</span> <span class="o">=</span> <span class="n">objective1</span><span class="p">(</span><span class="n">xspan</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Total Volume for 2 CSTRs vs. Int. Conversion&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xspan</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Intermediate Conversion XA1&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Total CSTR Volume (L)&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/52e0a374cbcf4be0313b8011a7d6e57239126c8334dc2bb6fff4fedc30319161.png" src="../_images/52e0a374cbcf4be0313b8011a7d6e57239126c8334dc2bb6fff4fedc30319161.png" />
</div>
</div>
</section>
<section id="minimizing-the-objective-function-analytically">
<h4>Minimizing the objective function analytically<a class="headerlink" href="#minimizing-the-objective-function-analytically" title="Link to this heading">#</a></h4>
<p>In some cases, we can find the minimum of an objective function analytically. To do this, we proceed as we would in a calculus course – we take the derivative of the objective function with respect to the parameter we are trying to optimize. In this case, we need to take the derivative of <span class="math notranslate nohighlight">\(V\)</span> with respect to <span class="math notranslate nohighlight">\(X_{A_1}\)</span>, we set it equal to zero, and we find the root of the expression. It is not always straightforward or even possible to find the analytical derivative of an objective function, but this is the basic idea of minimization – we find the point where the derivative of the objective function (with respect to the parameter of interst) is equal to zero. For this particular example, differntiation is somewhat tedious, but it is not especially difficult. Doing so, we find:</p>
<div class="math notranslate nohighlight">
\[\frac{dV}{dX_{A_1}} = \frac{F_{A_f}}{kC_{A_f}} \left[ \frac{ (1-X_{A_1}) + X_{A_1} }{ (1 - X_{A_1})^2} - 10\right]\]</div>
<p>To find the minimum, we solve the following equation for <span class="math notranslate nohighlight">\(X_{A_1}\)</span>:</p>
<div class="math notranslate nohighlight">
\[0 = \frac{1}{(1 - X_{A_1})^2} - 10\]</div>
<p>This is a quadratic, so we could solve it analytically. Alternatively, we could use a univariate equation solver like <code class="docutils literal notranslate"><span class="pre">opt.newton()</span></code>. This is the method used below. Once we find the root, we plug the optimal value of <span class="math notranslate nohighlight">\(A_{A_1}\)</span> back into our volume expression; this will be the smallest total CSTR volume that we can achieve using two CSTRs in series!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">der</span>  <span class="o">=</span> <span class="k">lambda</span> <span class="n">X</span><span class="p">:</span> <span class="n">FAf</span><span class="o">/</span><span class="n">k</span><span class="o">/</span><span class="n">CAf</span><span class="o">*</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">X</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">10</span>
<span class="n">Xopt</span> <span class="o">=</span> <span class="n">opt</span><span class="o">.</span><span class="n">newton</span><span class="p">(</span><span class="n">der</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="n">Vmin</span> <span class="o">=</span> <span class="n">objective1</span><span class="p">(</span><span class="n">Xopt</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The optimum intermediate conversion is </span><span class="si">{</span><span class="n">Xopt</span><span class="si">:</span><span class="s1">3.2f</span><span class="si">}</span><span class="s1">, which gives a total volume of </span><span class="si">{</span><span class="n">Vmin</span><span class="si">:</span><span class="s1">3.2f</span><span class="si">}</span><span class="s1">L&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Derivative of V with respect to XI&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xspan</span><span class="p">,</span> <span class="n">der</span><span class="p">(</span><span class="n">xspan</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hlines</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="s1">&#39;dashed&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Intermediate Conversion&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="o">-</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;dV/dXI (L)&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Total Volume for 2 CSTRs vs. Int. Conversion&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xspan</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Intermediate Conversion XA1&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Total CSTR Volume (L)&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hlines</span><span class="p">(</span><span class="n">Vmin</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Xopt</span><span class="p">,</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="s1">&#39;dashed&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span><span class="n">Xopt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Vmin</span><span class="p">,</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="s1">&#39;dashed&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The optimum intermediate conversion is 0.68, which gives a total volume of 4.32L
</pre></div>
</div>
<img alt="../_images/3c6606fc4771f6df6153aa07cd1952e741ea14ed0a393c5622f3fbe8f643f78f.png" src="../_images/3c6606fc4771f6df6153aa07cd1952e741ea14ed0a393c5622f3fbe8f643f78f.png" />
<img alt="../_images/7b7b3bf83ba6f935f3ac37781b3968581f2eb396b9f32668439cbd815e549e9d.png" src="../_images/7b7b3bf83ba6f935f3ac37781b3968581f2eb396b9f32668439cbd815e549e9d.png" />
</div>
</div>
</section>
<section id="minimizing-the-objective-function-numerically">
<h4>Minimizing the objective function numerically<a class="headerlink" href="#minimizing-the-objective-function-numerically" title="Link to this heading">#</a></h4>
<p>Sometimes, it is difficult or even impossible for us to determine a concise, closed-form analytical expression for the derivative of the objective function. In these cases, we would instead use a a numerical method to find the minimum value of the function. (See <a class="reference external" href="https://jqbond.github.io/CEN587/Supplements/587-S10.html">Supplement 10</a> and <a class="reference external" href="https://jqbond.github.io/CEN587/Supplements/587-S10.html">Supplement 11</a>). You have probably done this before if you have ever used the Solver add-in for Excel to minimize a function value – it uses similar algorithms to those in Python. The approach is similar to the one we would take for analytical minimization of a function – we write an objective function that calculates the quantity we want to minize with respect to the parameter we want to minimize with respect to.  In this case, we want to <strong>minimize</strong> total CSTR volume in two CSTRs in series <strong>with respect to</strong> intermediate fractional conversion, <span class="math notranslate nohighlight">\(X_{A_1}\)</span>. That sounds exactly like the objective function that we wrote above! We can then minimize this function using Python’s algorithms.</p>
<p>In Python, we have a few available options for numerical optimization (minimization). One useful method for optimizing scalar functions is <code class="docutils literal notranslate"><span class="pre">scipy.optimize.minimize_scalar()</span></code>, which is designed specifically to optimize (find the minimum of) univariate, scalar functions.</p>
<p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.minimize_scalar.html">https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.minimize_scalar.html</a></p>
<p>In the cells below, we’ll see how to change a few options with minimize scalar to account for additional complexities in the functions we are trying to minimize.  These include changing methods, adding brackets or bounds, and adding options.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">f2</span><span class="p">(</span><span class="n">X</span><span class="p">):</span>
    <span class="c1"># print(f&#39;Current int. conversion is {X:0.2f}&#39;)</span>
    <span class="n">FAf</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#mol/min</span>
    <span class="n">CAf</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#mol/L</span>
    <span class="n">k</span>   <span class="o">=</span> <span class="mi">1</span> <span class="c1">#1/min</span>
    <span class="n">V</span> <span class="o">=</span> <span class="n">FAf</span><span class="o">/</span><span class="n">k</span><span class="o">/</span><span class="n">CAf</span><span class="o">*</span><span class="p">(</span><span class="n">X</span><span class="o">/</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">X</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="mf">0.9</span> <span class="o">-</span> <span class="n">X</span><span class="p">)</span><span class="o">/</span><span class="mf">0.1</span><span class="p">)</span>
    <span class="c1"># print(f&#39;Which gives a Total volume of {V:0.2f}L \n&#39;)</span>
    <span class="k">return</span> <span class="n">V</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># opt.minimize_scalar(f2) #uses Bounded optimization with default parameters </span>
<span class="n">opt</span><span class="o">.</span><span class="n">minimize_scalar</span><span class="p">(</span><span class="n">f2</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;Golden&#39;</span><span class="p">)</span> <span class="c1">#uses Golden Section method with a default parameters</span>
<span class="c1"># opt.minimize_scalar(f2, method = &#39;Brent&#39;) #uses Brent&#39;s method with a default bracket of (0, 1)</span>
<span class="c1"># opt.minimize_scalar(f2, method = &#39;Brent&#39;, bracket = (0.1, 0.9)) #uses Brent&#39;s method with a bracket of (0.1, 0.9)</span>
<span class="c1"># opt.minimize_scalar(f2, method = &#39;Bounded&#39;, bounds = (0.1, 0.9)) #uses Bounded method with bounds of (0.1, 0.9)</span>
<span class="c1"># optset = {&#39;disp&#39; : True} #options are passed to the optimization algorithm using a dictionary of {&#39;key&#39; : value} pairs</span>
<span class="c1"># optset[&#39;disp&#39;]</span>
<span class="c1"># optset = {&#39;disp&#39; : True, &#39;maxiter&#39; : 100}</span>
<span class="c1"># opt.minimize_scalar(f2, method = &#39;Brent&#39;, bracket = (0.1, 0.9), options = optset)</span>
<span class="c1"># ans2 = opt.minimize_scalar(f2, method = &#39;Brent&#39;, bracket = (0.1, 0.9), options = optset)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\jqbon\AppData\Local\Temp\ipykernel_9348\413735644.py:6: RuntimeWarning: divide by zero encountered in scalar divide
  V = FAf/k/CAf*(X/(1.0 - X) + (0.9 - X)/0.1)
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> message: 
          Optimization terminated successfully;
          The returned value satisfies the termination criteria
          (using xtol = 1.4901161193847656e-08 )
 success: True
     fun: 4.324555320336758
       x: 0.6837722332399356
     nit: 39
    nfev: 44
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="example-problem-02">
<h2>Example Problem 02<a class="headerlink" href="#example-problem-02" title="Link to this heading">#</a></h2>
<p>Now let’s solve a slightly different problem. The previous example minimized the Volume of 2 reactors by varying the intermediate conversion. This is generally an example of minimizing Captial Cost of equipment (CapEx), which is largely determined by the size of the reactor. A more realistic optimization problem would require us to minimize the total total cost of our <em>process</em> and/or to maximize the profit generated by that process. In this case, we need to account for CapEx (which increases with the size of a reactor), but we also need to consider Operating Expenses (OpEx), which include raw material costs and expenses associated with running the process (e.g., utilities, wastewater treatment, maintenance, etc.). This is not a Unit Operations or Plant Design Course, so we will not go into substantial detail about calculating Capital and Operating Expenses. We only want to build deeper insight into minimizing the cost of a <em><strong>process</strong></em> rather than only minimizing the cost of fabricating the reactor. For this purpose, a very simple model for CapEx and OpEx is sufficient. First, we will say that the annualized capital cost of a <strong>single reactor</strong> is given by:</p>
<div class="math notranslate nohighlight">
\[\textrm{CapEx} = 3.78V^{2.3} + 20\]</div>
<p>Here <span class="math notranslate nohighlight">\(V\)</span> is volume of a reactor in L and CapEx has units of M\$ per year. As we calculate capital cost, it is important to emphasize that this equation computes the CapEx associated with a single reactor, therefore the input volume is that of a single reactor, not the sum volume of all reactors. If we use the latter, we will draw the conclusion that CapEx is a minimum as the number of CSTRs that we use goes to infinity, which is not realistic since there is substantial cost associated with fabricating each reactor, no matter how small.</p>
<p>OpEx will also have units of M\$ per year and scale with the number of reactors that we have in the following way:</p>
<div class="math notranslate nohighlight">
\[\textrm{OpEx} = 165.3N^\frac{1}{3}\]</div>
<p>We’ll also say that, for this simple example, the total annual cost of the process is CapEx plus OpEx.</p>
<p>Our final assumption: Each reactor in the series will accomplish the same incremental change in fractional conversion of species <span class="math notranslate nohighlight">\(A\)</span>. For example, if we achieve 90% conversion in 2 reactors, each will achieve 45% conversion of <span class="math notranslate nohighlight">\(F_{A_f}\)</span>.  If we have 10 reactors, each will achieve 9% conversion of <span class="math notranslate nohighlight">\(F_{A_f}\)</span>, etc. This way, the change in fractional conversion (amount converted) across any reactor is constant, and our CSTR balance on <strong>Reactor n</strong> becomes:</p>
<div class="math notranslate nohighlight">
\[V_n = \frac{F_{A_f}\Delta x_A}{kC_{A_f}(1 - x_{A_n})}\]</div>
<p>While we could certainly consider different increments in conversion across each reactor, it makes the problem a multivariate optimization problem, which is more complex and not the topic of discussion in this notebook. We will keep the rest of the information about this problem the same as in Problem 1, i.e.,:</p>
<div class="amsmath math notranslate nohighlight" id="equation-6e612118-685a-4025-bf90-61682675d01e">
<span class="eqno">(2)<a class="headerlink" href="#equation-6e612118-685a-4025-bf90-61682675d01e" title="Permalink to this equation">#</a></span>\[\begin{align}
    r &amp;= kC_A \\
    k &amp;= 1 \ \textrm{min}^{-1} \\
    F_{A_f} &amp;= 1 \ \textrm{mol} \ \textrm{min}^{-1} \\
    C_{A_f} &amp;= 1 \ \textrm{mol} \ \textrm{L}^{-1} \\
\end{align}\]</div>
<p>How many reactors should we use in order to minimize the total annual cost of the process?</p>
<section id="solution-to-example-problem-02">
<h3>Solution to Example Problem 02<a class="headerlink" href="#solution-to-example-problem-02" title="Link to this heading">#</a></h3>
<p>This problem asks us to determine how many CSTRs we should place in series to minimize the cost of the process. We’ll start by creating a function that takes the number of CSTRs, <span class="math notranslate nohighlight">\(N\)</span>, as an argument. It will then calculate the volume of each CSTR and the total volume of all CSTRs.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#######################################################################################################################</span>
<span class="c1"># This is a demonstration of a function that calculates the volume of a single reactor accomplishing 90% conversion   #</span>
<span class="c1"># We&#39;ll use this as a basis to build a more general function that calculates the volume of each reactor in the series #</span>
<span class="c1">#######################################################################################################################</span>

<span class="k">def</span><span class="w"> </span><span class="nf">volcalcn</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">FAf</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#mol/min</span>
    <span class="n">CAf</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#mol/L</span>
    <span class="n">k</span>   <span class="o">=</span> <span class="mi">1</span> <span class="c1">#1/min</span>
    <span class="n">XA</span>  <span class="o">=</span> <span class="mf">0.90</span>
    <span class="n">DX</span>  <span class="o">=</span> <span class="n">XA</span><span class="o">/</span><span class="n">n</span>
    <span class="n">Vn</span>  <span class="o">=</span> <span class="n">FAf</span><span class="o">*</span><span class="n">DX</span><span class="o">/</span><span class="n">k</span><span class="o">/</span><span class="n">CAf</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="mf">0.9</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Vn</span>
<span class="n">volcalcn</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>9.000000000000002
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">################################################################################################</span>
<span class="c1"># This is a more useful CSTR volume calculator for a series of CSTRs                           #</span>
<span class="c1"># It takes number of reactors in the series as an argument (N).                                #</span>
<span class="c1"># It then uses a for loop to calculate the volume of each reactor in the series                #</span>
<span class="c1"># The total volume is given by the sum of all individual reactor volumes                       #</span>
<span class="c1">################################################################################################</span>

<span class="k">def</span><span class="w"> </span><span class="nf">volcalc</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="n">FAf</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#mol/min</span>
    <span class="n">CAf</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#mol/L</span>
    <span class="n">k</span>   <span class="o">=</span> <span class="mi">1</span> <span class="c1">#1/min</span>
    <span class="n">XA</span>  <span class="o">=</span> <span class="mf">0.9</span>
    <span class="n">DX</span>  <span class="o">=</span> <span class="n">XA</span><span class="o">/</span><span class="n">N</span>
    
    <span class="n">reactorset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">N</span><span class="p">)</span>
    <span class="n">V</span>   <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">reactorset</span><span class="p">):</span>
         <span class="n">V</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">FAf</span><span class="o">/</span><span class="n">CAf</span><span class="o">/</span><span class="n">k</span><span class="o">*</span><span class="n">DX</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">n</span><span class="o">*</span><span class="n">DX</span><span class="p">)</span>
    <span class="n">Vtot</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">V</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">Vtot</span><span class="p">,</span> <span class="n">V</span><span class="p">]</span>

<span class="n">volcalc</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[np.float64(9.000000000000002), array([9.])]
</pre></div>
</div>
</div>
</div>
<p>Now we can use this function inside of an objective function. Here, our objective function should calculate the quantity we are trying to minimize (annual cost of the process) as a function of the parameter that we’d like to minimize with respect to (number of CSTRs in the series).  We have a bit of a challenge here, though: the number of reactors must be an integer quantity. For this reason, we can’t use an optimization algorithm as it is very difficult to restrict them to integral values of the parameter that we are varying. Put simply, we need the answer to be 1, 2, 3, 4, 5, … CSTRs, and an optimization algorithm might conclude that we need 1.57 CSTRs, which is difficult to parse.  As such, we will not use an optimization algorithm. Instead, we’ll define the function to calculate CAPEX, OPEX, and COST. We will then use a loop to calculate each of these quantities for various integer values of number of reactors, and then we will graph the result to visualize (1) the behavior of various cost drivers and (2) the optimum number of reactors in the sequence.</p>
<p>Ultimately, we find that OpEx increases monotonically with reactor number, CapEx reaches a minimum at 3 - 4 CSTRs, and the <em>process</em> has a minimum cost for 3 CSTRs in series.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">######################################################################</span>
<span class="c1"># A reasonable objective function for this optimization problem      #</span>
<span class="c1">######################################################################</span>

<span class="k">def</span><span class="w"> </span><span class="nf">obj</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="n">Vtot</span><span class="p">,</span> <span class="n">V</span> <span class="o">=</span> <span class="n">volcalc</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
    <span class="n">CAPEX</span> <span class="o">=</span> <span class="mf">3.78</span><span class="o">*</span><span class="n">V</span><span class="o">**</span><span class="p">(</span><span class="mf">2.3</span><span class="p">)</span> <span class="o">+</span> <span class="mi">20</span>
    <span class="n">CAPEX</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">CAPEX</span><span class="p">)</span>
    <span class="n">OPEX</span>  <span class="o">=</span> <span class="mf">165.3</span><span class="o">*</span><span class="n">N</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">COST</span>  <span class="o">=</span> <span class="n">CAPEX</span> <span class="o">+</span> <span class="n">OPEX</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">CAPEX</span><span class="p">,</span> <span class="n">OPEX</span><span class="p">,</span> <span class="n">COST</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">##################################################################</span>
<span class="c1"># Use a loop to evaluate CAPEX, OPEX, and COST for various N     #</span>
<span class="c1">##################################################################</span>

<span class="n">CAPEX</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="n">OPEX</span>  <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="n">COST</span>  <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>

<span class="n">nreact</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">int</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">N</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">nreact</span><span class="p">):</span>
    <span class="n">CAPEX</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">OPEX</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">COST</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The minimum cost is </span><span class="si">{</span><span class="n">COST</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">:</span><span class="s1">4.0f</span><span class="si">}</span><span class="s1">M$/yr, which we achieve with 3 CSTRs in series.&#39;</span><span class="p">)</span>

<span class="c1">###############################################################################################</span>
<span class="c1"># Graph the results                                                                           #</span>
<span class="c1">###############################################################################################</span>

<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">nreact</span><span class="p">,</span> <span class="n">CAPEX</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="n">edgecolor</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span>  <span class="n">marker</span> <span class="o">=</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;CAPEX&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">nreact</span><span class="p">,</span> <span class="n">OPEX</span><span class="p">,</span>  <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="n">edgecolor</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span>   <span class="n">marker</span> <span class="o">=</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;OPEX&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">nreact</span><span class="p">,</span> <span class="n">COST</span><span class="p">,</span>  <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="n">edgecolor</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">marker</span> <span class="o">=</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Cost&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">21</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of Reactors&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Cost (M$/yr)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The minimum cost is  348M$/yr, which we achieve with 3 CSTRs in series.
</pre></div>
</div>
<img alt="../_images/b28e1d940a3d867f67c7a8ecf3c1797f4d5aeba44548cabaef020baee2b02018.png" src="../_images/b28e1d940a3d867f67c7a8ecf3c1797f4d5aeba44548cabaef020baee2b02018.png" />
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./Notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../Chapter2.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Lectures</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#review-flow-reactors-in-series">Review: Flow Reactors in Series</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#achieving-90-conversion-in-a-single-flow-reactor">Achieving 90% conversion in a single flow reactor</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-levenspiel-plot-for-this-system">A Levenspiel Plot for this system</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#if-we-use-2-cstrs-instead-of-1-cstr-the-total-volume-required-is-lower">If we use 2 CSTRs instead of 1 CSTR, the total volume required is lower…</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-problem-01-what-is-the-optimum-intermediate-conversion">Example Problem 01: What is the optimum intermediate conversion?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#define-an-objective-function">Define an objective function</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#graph-the-objective-function">Graph the objective function!</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#minimizing-the-objective-function-analytically">Minimizing the objective function analytically</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#minimizing-the-objective-function-numerically">Minimizing the objective function numerically</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-problem-02">Example Problem 02</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#solution-to-example-problem-02">Solution to Example Problem 02</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jesse Q. Bond, Syracuse University
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>