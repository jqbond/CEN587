
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Reactors with Recycle &#8212; Kinetics and Reaction Engineering</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css?v=6644e6bb" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Notebooks/587-N35';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Lectures" href="../Chapter2.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/JQB.png" class="logo__image only-light" alt="Kinetics and Reaction Engineering - Home"/>
    <script>document.write(`<img src="../_static/JQB.png" class="logo__image only-dark" alt="Kinetics and Reaction Engineering - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Welcome to CEN 587!
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../Chapter2.html">Lectures</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Reactors with Recycle</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/jqbond/CEN587/main?urlpath=tree/Notebooks/587-N35.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Binder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Binder logo" src="../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/jqbond/CEN587" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/jqbond/CEN587/issues/new?title=Issue%20on%20page%20%2FNotebooks/587-N35.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/Notebooks/587-N35.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Reactors with Recycle</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-problem-01-a-recap-of-the-propane-dehydrogenation-example-from-notebook-34">Example Problem 01: A Recap of the Propane Dehydrogenation Example from Notebook 34</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#solution-to-example-problem-01">Solution to Example Problem 01</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analysis-of-the-overall-process">Analysis of the overall process</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analysis-of-the-splitter">Analysis of the Splitter</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analysis-of-the-separator">Analysis of the separator</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analysis-of-the-mixer">Analysis of the mixer</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analysis-of-the-reactor">Analysis of the reactor</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#this-was-an-easy-problem">This was an easy problem…</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-problem-02">Example Problem 02</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#solution-to-example-problem-02">Solution to Example Problem 02</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#balance-on-mixer">Balance on Mixer</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#balance-on-cstr">Balance on CSTR</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#balance-on-separator">Balance on Separator</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#balance-on-splitter">Balance on Splitter</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#other-information">Other Information</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-03">Problem 03</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#solution-to-example-problem-03">Solution to Example Problem 03</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Balance on Mixer</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#balance-on-pfr">Balance on PFR</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">Balance on Separator</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">Balance on Splitter</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#recycle-specification">Recycle Specification</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">Other Information</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#taking-stock-of-the-situation">Taking stock of the situation</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#resolving-the-pfr-balance-symbolically">Resolving the PFR balance (symbolically)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-04">Problem 04</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">Solution to Example Problem 03</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">Balance on Mixer</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">Balance on PFR</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">Balance on Separator</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">Balance on Splitter</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">Recycle Specification</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">Other Information</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">Taking stock of the situation</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#resolving-the-pfr-balance-numerically">Resolving the PFR balance (numerically)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="reactors-with-recycle">
<h1>Reactors with Recycle<a class="headerlink" href="#reactors-with-recycle" title="Link to this heading">#</a></h1>
<p>In <a class="reference external" href="https://jqbond.github.io/CEN587/Notebooks/587-N34.html">Notebook 34</a> we introduced the idea that a reactor with separations and recycle could be used to attain high overall (process-level) conversion in cases where one is forced to operate a reactor at low single pass conversion. The specific case considered in <a class="reference external" href="https://jqbond.github.io/CEN587/Notebooks/587-N34.html">Notebook 34</a> is that of an equilibrium limited reaction, but there are many scenarios that might lead one to propose a reactor with recycle. For example, one might prefer to run at low single pass conversion to promote selectivity to a desirable intermediate product in a sequential reaction. We will continue with our analysis of recycle processes in this Notebook, and we will extend consideration to different types of reactors (CSTR vs. PFR) and operating paradigms. Conceptually, the approach to analysis is identical to that in <a class="reference external" href="https://jqbond.github.io/CEN587/Notebooks/587-N34.html">Notebook 34</a>, but we may find that certain process specifications lead to a significantly more difficult solution strategies that require numerical methods.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">scipy.optimize</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">opt</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy.integrate</span><span class="w"> </span><span class="kn">import</span> <span class="n">solve_ivp</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy.interpolate</span><span class="w"> </span><span class="kn">import</span> <span class="n">interp1d</span>
</pre></div>
</div>
</div>
</div>
<section id="example-problem-01-a-recap-of-the-propane-dehydrogenation-example-from-notebook-34">
<h2>Example Problem 01: A Recap of the Propane Dehydrogenation Example from Notebook 34<a class="headerlink" href="#example-problem-01-a-recap-of-the-propane-dehydrogenation-example-from-notebook-34" title="Link to this heading">#</a></h2>
<p>You are designing a flow reactor in order to perform gas-phase propane dehydrogenation.</p>
<div class="math notranslate nohighlight">
\[C_3H_8 \longleftrightarrow C_3H_6 + H_2\]</div>
<p>The reaction has an elementary rate law, and it is performed at <span class="math notranslate nohighlight">\(T = 500\mathrm{K}\)</span> and <span class="math notranslate nohighlight">\(P = 8.2 \ \mathrm{atm}\)</span>. At this temperature, the forward rate constant and the concentration-based equilibrium constant, <span class="math notranslate nohighlight">\(K_C\)</span>, are:</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{align*}
    k_f &amp;= 0.7  \ \textrm{min}^{-1} \\
    K_C &amp;= 0.05 \ \textrm{mol} \ \textrm{L}^{-1}				
\end{align*}			\]</div>
<p>We will operate the dehydrogenation reactor (a PFR) at a relatively low single pass conversion. We will then separate the propylene out and recycle a fraction of the unreacted propane back to the reactor influent. In this way, we will achieve a higher overall conversion at the process level even though the reactor continues to operate at a low single pass conversion that cannot exceed the equilibrium limit for these conditions <span class="math notranslate nohighlight">\((X_A \approx 0.45)\)</span>. We will design the system so that the fresh propane feed into the process is combined with unconverted, recycled propane from the reactor in a mixer. This combined propane feed goes into a PFR, where it is partially converted to <span class="math notranslate nohighlight">\(H_2\)</span> and <span class="math notranslate nohighlight">\(C_3H_6\)</span>. the effluent from the reactor goes into a separator. For simplicity, we will assume propane is perfectly separated from <span class="math notranslate nohighlight">\(H_2\)</span> and <span class="math notranslate nohighlight">\(C_3H_6\)</span> inside of the separator – otherwise, we need to consider separator design, which is outside of our scope in this course and would be covered in a unit operations course. Finally, the unreacted propane enters a splitter, and a fraction of it <span class="math notranslate nohighlight">\((\alpha)\)</span> is recycled back to the mixer. The remaining quantity of propane is purged and exits the process. This is illustrated below:</p>
<figure class="align-default" id="pfrrecycle1">
<a class="reference internal image-reference" href="../_images/PFRRecycle.jpg"><img alt="../_images/PFRRecycle.jpg" src="../_images/PFRRecycle.jpg" style="width: 974.5px; height: 270.0px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 1 </span><span class="caption-text">Separation with recycle for propane dehydrogenation (PFR)</span><a class="headerlink" href="#pfrrecycle1" title="Link to this image">#</a></p>
</figcaption>
</figure>
<ol class="arabic simple">
<li><p>Determine the minimum recycle ratio required to achieve an overall propylene yield of 95% during propane dehydrogenation.</p></li>
<li><p>For this recycle ratio, determine the size of PFR required to achieve an overall propylene yield of 95%.</p></li>
</ol>
<section id="solution-to-example-problem-01">
<span id="id1"></span><h3>Solution to Example Problem 01<a class="headerlink" href="#solution-to-example-problem-01" title="Link to this heading">#</a></h3>
<p>We presented a detailed solution to this problem in <a class="reference external" href="https://jqbond.github.io/CEN587/Notebooks/587-N34.html#solution-to-example-problem-01">Notebook 34</a>. The solution is summarized below; the ultimate conclusion is that we need to operate at a recycle ratio of <span class="math notranslate nohighlight">\(\alpha \approx 0.96\)</span> to achieve an overall process level conversion of <span class="math notranslate nohighlight">\(X_A = 0.95\)</span> while maintaining single pass conversion below <span class="math notranslate nohighlight">\(X_{SP} \leq 0.447\)</span>. At this recycle ratio, we can run the process using a 242L PFR.</p>
<section id="analysis-of-the-overall-process">
<h4>Analysis of the overall process<a class="headerlink" href="#analysis-of-the-overall-process" title="Link to this heading">#</a></h4>
<p>If we draw a black box around the whole process, we know that it must achieve 95% conversion of the propane fed into the process at a flowrate of 10 mol/min. We can therefore define the exit flowrate of propane in terms of the inlet flowrate and the overall conversion</p>
<div class="math notranslate nohighlight">
\[F_{A4} = F_{A0}\left(1 - X_{A_{ov}}\right)\]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Because of the specifications made in this problem (we have specified the overall conversion), we can immediately calculate <span class="math notranslate nohighlight">\(F_{A4} = 0.5 \ \mathrm{mol \ min^{-1}}\)</span>, which makes determining flowrates into and out of each unit operation smooth and sequential. Recycle problems at not always this straightforward.</p>
</div>
</section>
<section id="analysis-of-the-splitter">
<h4>Analysis of the Splitter<a class="headerlink" href="#analysis-of-the-splitter" title="Link to this heading">#</a></h4>
<p>A balance on the splitter gives:</p>
<div class="math notranslate nohighlight">
\[0 = F_{A3} - F_{A4} - F_{A5}\]</div>
<p>We can express the recycle flowrate as a fraction of the flow into the splitter, i.e.,</p>
<div class="math notranslate nohighlight">
\[F_{A5} = \alpha F_{A3}\]</div>
<p>Substituting this into the splitter balance, we find:</p>
<div class="math notranslate nohighlight">
\[0 = F_{A3} - F_{A4} - \alpha F_{A3}\]</div>
<p>We can solve for <span class="math notranslate nohighlight">\(F_{A3}\)</span> to find:</p>
<div class="math notranslate nohighlight">
\[F_{A3} = \frac{1}{1 - \alpha}F_{A4}\]</div>
<p>And we can substitute this back into the definition for <span class="math notranslate nohighlight">\(F_{A5}\)</span>:</p>
<div class="math notranslate nohighlight">
\[F_{A5} = \frac{\alpha}{1 - \alpha} F_{A4}\]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We now have pretty clear definitions for <span class="math notranslate nohighlight">\(F_{A3}\)</span> and <span class="math notranslate nohighlight">\(F_{A5}\)</span>. Upon inspection of these definitions, it should become clear that, because we know that <span class="math notranslate nohighlight">\(F_{A4} = 0.5 \ \mathrm{mol \ min^{-1}}\)</span> for this process, we can calculate both <span class="math notranslate nohighlight">\(F_{A3}\)</span> and <span class="math notranslate nohighlight">\(F_{A5}\)</span> as soon as we specify the value of the recycle ratio, <span class="math notranslate nohighlight">\(\alpha\)</span>. One can then imagine an iterative operation wherein we pass trial values of <span class="math notranslate nohighlight">\(\alpha\)</span> to these functions and calculate the resultant values for <span class="math notranslate nohighlight">\(F_{A3}\)</span> and <span class="math notranslate nohighlight">\(F_{A5}\)</span>.</p>
</div>
</section>
<section id="analysis-of-the-separator">
<h4>Analysis of the separator<a class="headerlink" href="#analysis-of-the-separator" title="Link to this heading">#</a></h4>
<p>A balance on the separator is straightforward and tells us that:</p>
<div class="math notranslate nohighlight">
\[F_{A2} = F_{A3}\]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Following the insight above, we know that once we specify <span class="math notranslate nohighlight">\(\alpha\)</span>, <span class="math notranslate nohighlight">\(F_{A3}\)</span> is determined. This means that specification of <span class="math notranslate nohighlight">\(\alpha\)</span> also determines <span class="math notranslate nohighlight">\(F_{A2}\)</span>.</p>
</div>
</section>
<section id="analysis-of-the-mixer">
<h4>Analysis of the mixer<a class="headerlink" href="#analysis-of-the-mixer" title="Link to this heading">#</a></h4>
<p>A balance on the mixer gives us the combined feed rate into the reactor, <span class="math notranslate nohighlight">\(F_{A1}\)</span></p>
<div class="math notranslate nohighlight">
\[F_{A1} = F_{A0} + F_{A5}\]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We already know <span class="math notranslate nohighlight">\(F_{A0}\)</span> – this is the feed rate of fresh propane into the process. Reflecting on the above insights, we know that specifying <span class="math notranslate nohighlight">\(\alpha\)</span> determines <span class="math notranslate nohighlight">\(F_{A5}\)</span>, so it also determines <span class="math notranslate nohighlight">\(F_{A1}\)</span></p>
</div>
</section>
<section id="analysis-of-the-reactor">
<h4>Analysis of the reactor<a class="headerlink" href="#analysis-of-the-reactor" title="Link to this heading">#</a></h4>
<p>If we look at the reactor, we can define a single pass fractional conversion in terms of <span class="math notranslate nohighlight">\(F_{A1}\)</span> and <span class="math notranslate nohighlight">\(F_{A2}\)</span>, both of which are determiend once we specify a trial value for <span class="math notranslate nohighlight">\(\alpha\)</span>.</p>
<div class="math notranslate nohighlight">
\[X_{SP} = \frac{F_{A1} - F_{A2}}{F_{A1}}\]</div>
<p>We have not specified <span class="math notranslate nohighlight">\(\alpha\)</span> yet, so we still have a degree of freedom in the system and we cannot solve all of these equations. Before proceeding, review the equations and notes above, and convince yourself that, once we specify the recycle ratio, <span class="math notranslate nohighlight">\(\alpha\)</span>, all flowrates in this process are fully determined, and we can solve for the single pass conversion through the PFR.</p>
<p>In the code cell below, we will create a function that takes the recycle ratio as an argument and returns all of the process flowrates as well as the single pass and overall conversion.</p>
<p>One approach to determine the recycle ratio required to achieve an overall conversion of <span class="math notranslate nohighlight">\(X_A = 0.95\)</span> is to iteratively test values for the recycle ratio until we find one that will allow for a permissible single pass conversion in the PFR. By this, we mean a single pass conversion that is below the equilibrium limit, which we know is <span class="math notranslate nohighlight">\(X_A \approx 0.45\)</span> for a pure propane feed, <span class="math notranslate nohighlight">\(T = 500K\)</span> and <span class="math notranslate nohighlight">\(P = 8.2 \ \mathrm{atm}\)</span>. so we just have to find a recycle ratio that will allow us to operate with a PFR below 44% conversion. We find that we can do this with a recycle ratio of <span class="math notranslate nohighlight">\(\alpha = 0.96\)</span>, which gives a single pass conversion of <span class="math notranslate nohighlight">\(X_{SP} = 0.43\)</span> and requires a PFR volume of <span class="math notranslate nohighlight">\(V = 242 \ \mathrm{L}\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">###########################################################################</span>
<span class="c1"># Global constants for P01                                                #</span>
<span class="c1">###########################################################################</span>

<span class="n">kf</span>  <span class="o">=</span> <span class="mf">0.7</span>  <span class="c1">#1/min</span>
<span class="n">KC</span>  <span class="o">=</span> <span class="mf">0.05</span> <span class="c1">#mol/L</span>
<span class="n">kr</span>  <span class="o">=</span> <span class="n">kf</span><span class="o">/</span><span class="n">KC</span> <span class="c1">#L/mol/min</span>
<span class="n">T</span>   <span class="o">=</span> <span class="mi">500</span> <span class="c1">#K</span>
<span class="n">P</span>   <span class="o">=</span> <span class="mf">8.2</span> <span class="c1">#atm</span>
<span class="n">R</span>   <span class="o">=</span> <span class="mf">0.08206</span> <span class="c1">#L*atm/mol/K</span>
<span class="n">FA0</span> <span class="o">=</span> <span class="mf">10.0</span> <span class="c1">#mol/min</span>
<span class="n">FB0</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">FC0</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">XEQ</span> <span class="o">=</span> <span class="mf">0.447</span>
<span class="n">XAP</span> <span class="o">=</span> <span class="mf">0.950</span>

<span class="c1">##########################################################################</span>
<span class="c1"># Define a function to calculate flowrates and conversions for a given α #</span>
<span class="c1">##########################################################################</span>

<span class="k">def</span><span class="w"> </span><span class="nf">recycle</span><span class="p">(</span><span class="n">α</span><span class="p">):</span>
    <span class="n">FA4</span> <span class="o">=</span> <span class="n">FA0</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">XAP</span><span class="p">)</span>
    <span class="n">FA3</span> <span class="o">=</span> <span class="n">FA4</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">α</span><span class="p">)</span>
    <span class="n">FA2</span> <span class="o">=</span> <span class="n">FA3</span>
    <span class="n">FA5</span> <span class="o">=</span> <span class="n">α</span><span class="o">*</span><span class="n">FA3</span>
    <span class="n">FA1</span> <span class="o">=</span> <span class="n">FA0</span> <span class="o">+</span> <span class="n">FA5</span>
    <span class="n">XSP</span> <span class="o">=</span> <span class="p">(</span><span class="n">FA1</span> <span class="o">-</span> <span class="n">FA2</span><span class="p">)</span><span class="o">/</span><span class="n">FA1</span>
    <span class="n">XOV</span> <span class="o">=</span> <span class="p">(</span><span class="n">FA0</span> <span class="o">-</span> <span class="n">FA4</span><span class="p">)</span><span class="o">/</span><span class="n">FA0</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">α</span><span class="p">,</span> <span class="n">FA0</span><span class="p">,</span> <span class="n">FA1</span><span class="p">,</span> <span class="n">FA2</span><span class="p">,</span> <span class="n">FA3</span><span class="p">,</span> <span class="n">FA4</span><span class="p">,</span> <span class="n">FA5</span><span class="p">,</span> <span class="n">XSP</span><span class="p">,</span> <span class="n">XOV</span><span class="p">]</span>

<span class="c1">##########################################################################</span>
<span class="c1"># Calculate flowrates and conversion for specified recycle ratio         #</span>
<span class="c1">##########################################################################</span>

<span class="n">α</span> <span class="o">=</span> <span class="mf">0.96</span>
<span class="n">α</span><span class="p">,</span> <span class="n">FA0</span><span class="p">,</span> <span class="n">FA1</span><span class="p">,</span> <span class="n">FA2</span><span class="p">,</span> <span class="n">FA3</span><span class="p">,</span> <span class="n">FA4</span><span class="p">,</span> <span class="n">FA5</span><span class="p">,</span> <span class="n">XSP</span><span class="p">,</span> <span class="n">XOV</span> <span class="o">=</span> <span class="n">recycle</span><span class="p">(</span><span class="n">α</span><span class="p">)</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">α</span><span class="p">,</span> <span class="n">FA0</span><span class="p">,</span> <span class="n">FA1</span><span class="p">,</span> <span class="n">FA2</span><span class="p">,</span> <span class="n">FA3</span><span class="p">,</span> <span class="n">FA4</span><span class="p">,</span> <span class="n">FA5</span><span class="p">,</span> <span class="n">XSP</span><span class="p">,</span> <span class="n">XOV</span><span class="p">]</span>
<span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;α&#39;</span><span class="p">,</span> <span class="s1">&#39;FA0&#39;</span><span class="p">,</span> <span class="s1">&#39;FA1&#39;</span><span class="p">,</span> <span class="s1">&#39;FA2&#39;</span><span class="p">,</span> <span class="s1">&#39;FA3&#39;</span><span class="p">,</span> <span class="s1">&#39;FA4&#39;</span><span class="p">,</span> <span class="s1">&#39;FA5&#39;</span><span class="p">,</span> <span class="s1">&#39;XSP&#39;</span><span class="p">,</span> <span class="s1">&#39;XOV&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">label</span> <span class="o">==</span> <span class="s1">&#39;XSP&#39;</span> <span class="ow">or</span> <span class="n">label</span> <span class="o">==</span> <span class="s1">&#39;XOV&#39;</span> <span class="ow">or</span> <span class="n">label</span> <span class="o">==</span> <span class="s1">&#39;α&#39;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">label</span><span class="si">:</span><span class="s1">3s</span><span class="si">}</span><span class="s1"> = </span><span class="si">{</span><span class="n">value</span><span class="si">:</span><span class="s1">5.2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">label</span><span class="si">:</span><span class="s1">3s</span><span class="si">}</span><span class="s1"> = </span><span class="si">{</span><span class="n">value</span><span class="si">:</span><span class="s1">5.2f</span><span class="si">}</span><span class="s1"> mol/min&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1"> if α = </span><span class="si">{</span><span class="n">α</span><span class="si">:</span><span class="s1">4.3f</span><span class="si">}</span><span class="s1">, we need a single pass conversion of XSP = </span><span class="si">{</span><span class="n">XSP</span><span class="si">:</span><span class="s1">4.3f</span><span class="si">}</span><span class="s1"> to achieve an overall conversion of XOV = </span><span class="si">{</span><span class="n">XOV</span><span class="si">:</span><span class="s1">4.3f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1">###################################################################</span>
<span class="c1"># Define the ODE system as f(V, [FA, FB, FC])                     #</span>
<span class="c1"># function will return [dFAdV, dFBdV, dFCdV]                      #</span>
<span class="c1">###################################################################</span>

<span class="k">def</span><span class="w"> </span><span class="nf">P01</span><span class="p">(</span><span class="n">V</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
    <span class="n">FA</span><span class="p">,</span> <span class="n">FB</span><span class="p">,</span> <span class="n">FC</span> <span class="o">=</span> <span class="n">var</span>

    <span class="n">FT</span> <span class="o">=</span> <span class="n">FA</span> <span class="o">+</span> <span class="n">FB</span> <span class="o">+</span> <span class="n">FC</span>
    
    <span class="n">Q</span>  <span class="o">=</span> <span class="n">FT</span><span class="o">*</span><span class="n">R</span><span class="o">*</span><span class="n">T</span><span class="o">/</span><span class="n">P</span>
    
    <span class="n">CA</span> <span class="o">=</span> <span class="n">FA</span><span class="o">/</span><span class="n">Q</span>
    <span class="n">CB</span> <span class="o">=</span> <span class="n">FB</span><span class="o">/</span><span class="n">Q</span>
    <span class="n">CC</span> <span class="o">=</span> <span class="n">FC</span><span class="o">/</span><span class="n">Q</span>
    
    <span class="n">r</span>  <span class="o">=</span> <span class="n">kf</span><span class="o">*</span><span class="n">CA</span> <span class="o">-</span> <span class="n">kr</span><span class="o">*</span><span class="n">CB</span><span class="o">*</span><span class="n">CC</span>
    
    <span class="n">RA</span> <span class="o">=</span> <span class="o">-</span><span class="n">r</span>
    <span class="n">RB</span> <span class="o">=</span>  <span class="n">r</span>
    <span class="n">RC</span> <span class="o">=</span>  <span class="n">r</span>
    
    <span class="n">dA</span> <span class="o">=</span> <span class="n">RA</span>
    <span class="n">dB</span> <span class="o">=</span> <span class="n">RB</span>
    <span class="n">dC</span> <span class="o">=</span> <span class="n">RC</span>
    
    <span class="k">return</span> <span class="p">[</span><span class="n">dA</span><span class="p">,</span> <span class="n">dB</span><span class="p">,</span> <span class="n">dC</span><span class="p">]</span>

<span class="c1">####################################################################</span>
<span class="c1"># Define the integration span and initial state of each variable   #</span>
<span class="c1">####################################################################</span>

<span class="n">Vspan</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">300.0</span><span class="p">)</span>
<span class="n">var0</span>  <span class="o">=</span> <span class="p">(</span><span class="n">FA1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

<span class="c1">####################################################################</span>
<span class="c1"># Integrate the ODE system using solve_ivp()                       #</span>
<span class="c1">####################################################################</span>

<span class="n">ans01</span>  <span class="o">=</span> <span class="n">solve_ivp</span><span class="p">(</span><span class="n">P01</span><span class="p">,</span> <span class="n">Vspan</span><span class="p">,</span> <span class="n">var0</span><span class="p">,</span> <span class="n">atol</span> <span class="o">=</span> <span class="mf">1e-8</span><span class="p">,</span> <span class="n">rtol</span> <span class="o">=</span>  <span class="mf">1e-8</span><span class="p">)</span>

<span class="c1">####################################################################</span>
<span class="c1"># Extract important data from the solution structure               #</span>
<span class="c1">####################################################################</span>

<span class="n">V</span>     <span class="o">=</span> <span class="n">ans01</span><span class="o">.</span><span class="n">t</span>
<span class="n">FA</span>    <span class="o">=</span> <span class="n">ans01</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">FB</span>    <span class="o">=</span> <span class="n">ans01</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">FC</span>    <span class="o">=</span> <span class="n">ans01</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

<span class="c1">####################################################################</span>
<span class="c1"># Calculate fractional conversions                                 #</span>
<span class="c1">####################################################################</span>

<span class="n">XA</span>    <span class="o">=</span> <span class="p">(</span><span class="n">FA1</span> <span class="o">-</span> <span class="n">FA</span><span class="p">)</span><span class="o">/</span><span class="n">FA1</span>

<span class="c1">#################################################################################################</span>
<span class="c1"># Graph XA vs. Volume -- why does XA stop increasing even though the reactor is getting larger? #</span>
<span class="c1">#################################################################################################</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">V</span><span class="p">,</span> <span class="n">XA</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">Vspan</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">fontsize</span> <span class="o">=</span> <span class="mi">11</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Volume (L)&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">fontsize</span> <span class="o">=</span> <span class="mi">11</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Conversion of A&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1">####################################################################</span>
<span class="c1"># Construct interpolating polynomial approximation for V(XA)       #</span>
<span class="c1"># Attempt to find V(XSP)                                           #</span>
<span class="c1">####################################################################</span>

<span class="n">itp1</span> <span class="o">=</span> <span class="n">interp1d</span><span class="p">(</span><span class="n">XA</span><span class="p">,</span> <span class="n">V</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The Volume required for a PFR single pass conversion of XA = </span><span class="si">{</span><span class="n">XSP</span><span class="si">:</span><span class="s1">0.3f</span><span class="si">}</span><span class="s1"> is </span><span class="si">{</span><span class="n">itp1</span><span class="p">(</span><span class="n">XSP</span><span class="p">)</span><span class="si">:</span><span class="s1">0.0f</span><span class="si">}</span><span class="s1">L&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>α   =  0.96
FA0 = 10.00 mol/min
FA1 = 22.00 mol/min
FA2 = 12.50 mol/min
FA3 = 12.50 mol/min
FA4 =  0.50 mol/min
FA5 = 12.00 mol/min
XSP =  0.43
XOV =  0.95

 if α = 0.960, we need a single pass conversion of XSP = 0.432 to achieve an overall conversion of XOV = 0.950
</pre></div>
</div>
<img alt="../_images/fecdfa68b04c8ec98ad9f33a18e4d2d252f16a77c31e2b078faddb3f0a5dc8b4.png" src="../_images/fecdfa68b04c8ec98ad9f33a18e4d2d252f16a77c31e2b078faddb3f0a5dc8b4.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The Volume required for a PFR single pass conversion of XA = 0.432 is 242L
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="this-was-an-easy-problem">
<h3>This was an easy problem…<a class="headerlink" href="#this-was-an-easy-problem" title="Link to this heading">#</a></h3>
<p>The above example is probably the simplest possible scenario for recycle operation. The reason is that we are given the overall process level conversion <span class="math notranslate nohighlight">\((X_A = 0.95)\)</span>, and we are given the freedom to vary the recycle ratio until we find the point where the single pass reactor level conversion is within the equilibrium limit. This case is straightforward for the following reasons:</p>
<ol class="arabic simple">
<li><p>Because we have a specification on the overall conversion of the process, it is straightforward to calculate <span class="math notranslate nohighlight">\(F_{A4}\)</span>:</p></li>
</ol>
<div class="amsmath math notranslate nohighlight" id="equation-8d310496-d444-42db-a703-b159b1ca2512">
<span class="eqno">(1)<a class="headerlink" href="#equation-8d310496-d444-42db-a703-b159b1ca2512" title="Permalink to this equation">#</a></span>\[\begin{align}
    F_{A4} = F_{A0}(1 - X_{A_{ov}})\\
    F_{A4} = 0.5 \ \textrm{mol} \ \textrm{min}^{-1}
\end{align}\]</div>
<ol class="arabic simple" start="2">
<li><p>Since we were given the freedom to adjust the recycle ratio to reduce the necessary single pass conversion, we can set the recycle ratio to a value–here we found that <span class="math notranslate nohighlight">\(\alpha = 0.96\)</span> will permit the PFR to operate at a conversion that is less than the equilibrium limit.  Once <span class="math notranslate nohighlight">\(\alpha\)</span> is specified, the balance on the splitter gives:</p></li>
</ol>
<div class="amsmath math notranslate nohighlight" id="equation-3abfb6d8-ecba-4526-9b9b-c04985040ffb">
<span class="eqno">(2)<a class="headerlink" href="#equation-3abfb6d8-ecba-4526-9b9b-c04985040ffb" title="Permalink to this equation">#</a></span>\[\begin{align}
    F_{A3} &amp;= \frac{1}{1 - \alpha} F_{A4} \\
    F_{A5} &amp;= \frac{\alpha}{1 - \alpha} F_{A4} \\
\end{align}\]</div>
<p>Since <span class="math notranslate nohighlight">\(F_{A4}\)</span> and <span class="math notranslate nohighlight">\(\alpha\)</span> are known, we can solve to get:</p>
<div class="amsmath math notranslate nohighlight" id="equation-f28a5825-bb55-434b-94f7-94aa2ce0902f">
<span class="eqno">(3)<a class="headerlink" href="#equation-f28a5825-bb55-434b-94f7-94aa2ce0902f" title="Permalink to this equation">#</a></span>\[\begin{align}
    F_{A3} = 12.5 \ \textrm{mol} \ \textrm{min}^{-1}\\
    F_{A5} = 12.0 \ \textrm{mol} \ \textrm{min}^{-1}\\
\end{align}\]</div>
<ol class="arabic simple" start="3">
<li><p>A balance on the separator then tells us that:</p></li>
</ol>
<div class="math notranslate nohighlight">
\[F_{A2} = F_{A3} = 12.5 \ \textrm{mol} \ \textrm{min}^{-1}\]</div>
<ol class="arabic simple" start="4">
<li><p>A balance on the mixer gives us:</p></li>
</ol>
<div class="math notranslate nohighlight">
\[F_{A1} = F_{A0} + F_{A5} = 22.0 \ \textrm{mol} \ \textrm{min}^{-1}\]</div>
<ol class="arabic simple" start="5">
<li><p>Since we know the flowrate of propane coming into and out of the reactor, we can calculate the single pass conversion in the reactor:</p></li>
</ol>
<div class="math notranslate nohighlight">
\[X_{A_{sp}} = 0.432\]</div>
<p>With those specifications, we can easily figure out the molar flowrate of A at every point in the PFD, and we can easily size a PFR that operates at 8.2 atm and 500K with an inlet propane flowrate of 22 moles per minute to accomplish 43.2% conversion. Next, we look at problems that are conceptually no more difficult than this, but the mechanics of obtaining a solution (a number answer) are much more challenging. We will start with a relatively easy modifiction in <a class="reference internal" href="#example-problem-02">Example Problem 02</a>, and then we will move to increasingly difficult variations of the recycle problem.</p>
</section>
</section>
<section id="example-problem-02">
<span id="id2"></span><h2>Example Problem 02<a class="headerlink" href="#example-problem-02" title="Link to this heading">#</a></h2>
<p>For this variation, we will use the same simple, perfect recycle scheme illustrated above for this problem, but we’ll replace the PFR with a CSTR.</p>
<figure class="align-default" id="cstrrecycle">
<a class="reference internal image-reference" href="../_images/CSTRRecycle.jpg"><img alt="../_images/CSTRRecycle.jpg" src="../_images/CSTRRecycle.jpg" style="width: 974.0px; height: 270.0px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 2 </span><span class="caption-text">Separation with recycle for propane dehydrogenation (CSTR)</span><a class="headerlink" href="#cstrrecycle" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>We will modify the problem in one additional way to allow a more straightforwad solution: we will switch to a much simpler reaction–the irreversible conversion of <span class="math notranslate nohighlight">\(A\)</span> into <span class="math notranslate nohighlight">\(B\)</span>:</p>
<div class="math notranslate nohighlight">
\[A \longrightarrow B\]</div>
<p>This reaction occurs in the gas phase, it has a rate constant <span class="math notranslate nohighlight">\(k = 10 \ \textrm{s}^{-1}\)</span> and we run it without a diluent, i.e., we feed Pure species <span class="math notranslate nohighlight">\(A\)</span> into the process at a rate of <span class="math notranslate nohighlight">\(100 \ \mathrm{mol \ s^{-1}}\)</span>. The entire process is carried out at T = 573K and P = 1.0 atm. If the volume of the CSTR is <span class="math notranslate nohighlight">\(V = 400 \ \mathrm{L}\)</span>, and we recycle 50% of the unreacted species <span class="math notranslate nohighlight">\(A\)</span>, calculate the single pass and overall conversion of <span class="math notranslate nohighlight">\(A\)</span> achieved in the process.</p>
<p>This problem is considerably more difficult because we cannot directly calculate the flowrates of <span class="math notranslate nohighlight">\(A\)</span> coming out of the splitter, so we end up needing to solve a large system of algebraic equations simultaneously…</p>
<section id="solution-to-example-problem-02">
<span id="id3"></span><h3>Solution to Example Problem 02<a class="headerlink" href="#solution-to-example-problem-02" title="Link to this heading">#</a></h3>
<p>We can write a balance on species A in each unit operation: the Mixer, the CSTR, the Separator, and the Splitter.</p>
<section id="balance-on-mixer">
<h4>Balance on Mixer<a class="headerlink" href="#balance-on-mixer" title="Link to this heading">#</a></h4>
<div class="math notranslate nohighlight">
\[ 0 = F_{A0} + F_{A5} - F_{A1} \]</div>
</section>
<section id="balance-on-cstr">
<h4>Balance on CSTR<a class="headerlink" href="#balance-on-cstr" title="Link to this heading">#</a></h4>
<div class="math notranslate nohighlight">
\[ 0 = F_{A1} - F_{A2} + R_{A2}V \]</div>
</section>
<section id="balance-on-separator">
<h4>Balance on Separator<a class="headerlink" href="#balance-on-separator" title="Link to this heading">#</a></h4>
<div class="math notranslate nohighlight">
\[ 0 = F_{A2} - F_{A3} \]</div>
</section>
<section id="balance-on-splitter">
<h4>Balance on Splitter<a class="headerlink" href="#balance-on-splitter" title="Link to this heading">#</a></h4>
<div class="math notranslate nohighlight">
\[ 0 = F_{A3} - F_{A4} - F_{A5} \]</div>
</section>
<section id="other-information">
<h4>Other Information<a class="headerlink" href="#other-information" title="Link to this heading">#</a></h4>
<p>We have the following information available to us:</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{align*}
    k &amp;= 10 \ \mathrm{s^{-1}} \\
    T &amp;= 573 \ \mathrm{K} \\
    P &amp;= 1.0 \ \mathrm{atm} \\
    V &amp;= 400 \ \mathrm{L} \\
    F_{A0} &amp;= 100 \ \mathrm{mol \ s^{-1}} 
\end{align*}\]</div>
<p>Assessing this set of constants and the above set of equations, we have 5 unknown flowrates <span class="math notranslate nohighlight">\((F_{A1}, \ F_{A2}, \ F_{A3}, \ F_{A4}, \ F_{A5})\)</span> and one unknown production rate (<span class="math notranslate nohighlight">\(R_{A2}\)</span>).  We can specify the production rate in terms of molar flowrates and volumetric flowrates:</p>
<div class="amsmath math notranslate nohighlight" id="equation-e27c4d50-b24b-4d2a-8fc0-b95f1c495898">
<span class="eqno">(4)<a class="headerlink" href="#equation-e27c4d50-b24b-4d2a-8fc0-b95f1c495898" title="Permalink to this equation">#</a></span>\[\begin{align}
    R_{A2} &amp;= -r_2 \\
    r_2 &amp;= kC_{A2} \\
    C_{A2} &amp;= \frac{F_{A2}}{Q_2}
\end{align}\]</div>
<p>We can simplify the problem a bit by realizing that there is no change in the number of moles for this reaction, so the volumetric flowrate entering the CSTR (<span class="math notranslate nohighlight">\(Q_1\)</span>) is the same as the volumetric flowrate exiting the reactor (<span class="math notranslate nohighlight">\(Q_2\)</span>). The only species entering the CSTR is <span class="math notranslate nohighlight">\(A\)</span>, so we can then calculate the volumetric flowrate entirely based on the flowrate of species <span class="math notranslate nohighlight">\(A\)</span> into the reactor, <span class="math notranslate nohighlight">\(F_{A1}\)</span>. Since this is a gas-phase reaction at low pressure, we can use the ideal gas law:</p>
<div class="math notranslate nohighlight">
\[Q_1 = \frac{F_{A1} RT}{P}\]</div>
<p><span class="math notranslate nohighlight">\(k\)</span>, <span class="math notranslate nohighlight">\(R\)</span>, <span class="math notranslate nohighlight">\(T\)</span>, and <span class="math notranslate nohighlight">\(P\)</span> are all known constants. The production rate in the CSTR is then explicitly defined as a function of one unknown molar flowrate <span class="math notranslate nohighlight">\((F_{A1})\)</span>; however, we cannot determine <span class="math notranslate nohighlight">\(F_{A1}\)</span> without solving the set of 4 material balances on our unit operations, which are expressed in terms of 5 total unknowns .  This leaves us with 5 total unknowns in the problem <span class="math notranslate nohighlight">\((F_{A1}, \ F_{A2}, \ F_{A3}, \ F_{A4}, \ F_{A5})\)</span>, so we need to add one more equation to the system in order to solve it. We can get it from the specification that the recycle ratio at the splitter is 0.5:</p>
<p>The recycle ratio is defined as:</p>
<div class="math notranslate nohighlight">
\[\alpha = \frac{F_{A5}}{F_{A3}}\]</div>
<p>An easy way to add that constraint to the problem is to reformulate it as an algebraic equation whose left hand size is zero:</p>
<div class="math notranslate nohighlight">
\[ 0 = F_{A5} - F_{A3}\alpha\]</div>
<p>So now we have 5 equations that are expressed in terms of 5 unknowns; we can solve this with <code class="docutils literal notranslate"><span class="pre">opt.root()</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">################################################################################</span>
<span class="c1"># Defining global constants for Example Problem 02                             #</span>
<span class="c1">################################################################################</span>

<span class="n">FA0</span> <span class="o">=</span> <span class="mi">100</span>     <span class="c1">#moles per second</span>
<span class="n">k</span>   <span class="o">=</span> <span class="mi">10</span>      <span class="c1">#1/sec</span>
<span class="n">T</span>   <span class="o">=</span> <span class="mi">573</span>     <span class="c1">#K</span>
<span class="n">P</span>   <span class="o">=</span> <span class="mf">1.0</span>     <span class="c1">#atm</span>
<span class="n">R</span>   <span class="o">=</span> <span class="mf">0.08206</span> <span class="c1">#L*atm/mol/K</span>
<span class="n">V</span>   <span class="o">=</span> <span class="mi">400</span>     <span class="c1">#L</span>
<span class="n">α</span>   <span class="o">=</span> <span class="mf">0.5</span>

<span class="c1">################################################################################</span>
<span class="c1"># Define the system of algebraic equations that describes the Process          #</span>
<span class="c1"># It has the form f([FA1, FA2, FA3, FA4, FA5])                                 #</span>
<span class="c1"># It returns the LHS of the 5 algebraic equations                              # </span>
<span class="c1">################################################################################</span>

<span class="k">def</span><span class="w"> </span><span class="nf">P02</span><span class="p">(</span><span class="n">var</span><span class="p">):</span>
    <span class="n">FA1</span><span class="p">,</span> <span class="n">FA2</span><span class="p">,</span> <span class="n">FA3</span><span class="p">,</span> <span class="n">FA4</span><span class="p">,</span> <span class="n">FA5</span> <span class="o">=</span> <span class="n">var</span>      
    <span class="n">Q1</span>  <span class="o">=</span> <span class="n">FA1</span><span class="o">*</span><span class="n">R</span><span class="o">*</span><span class="n">T</span><span class="o">/</span><span class="n">P</span> <span class="c1">#volumetric flowrate into CSTR</span>
    <span class="n">Q2</span>  <span class="o">=</span> <span class="n">Q1</span>        <span class="c1">#A --&gt; B so Q1 = Q2</span>
    <span class="n">CA2</span> <span class="o">=</span> <span class="n">FA2</span><span class="o">/</span><span class="n">Q2</span>    <span class="c1">#Concentration of A in CSTR</span>
    <span class="n">r</span>   <span class="o">=</span> <span class="n">k</span><span class="o">*</span><span class="n">CA2</span><span class="p">;</span>    <span class="c1">#rate of reaction in CSTR</span>
    <span class="n">RA2</span> <span class="o">=</span> <span class="o">-</span><span class="n">r</span>        <span class="c1">#Production rate of A in CSTR</span>
    
    <span class="n">LHS1</span> <span class="o">=</span> <span class="n">FA0</span> <span class="o">+</span> <span class="n">FA5</span> <span class="o">-</span> <span class="n">FA1</span>
    <span class="n">LHS2</span> <span class="o">=</span> <span class="n">FA1</span> <span class="o">-</span> <span class="n">FA2</span> <span class="o">+</span> <span class="n">RA2</span><span class="o">*</span><span class="n">V</span>
    <span class="n">LHS3</span> <span class="o">=</span> <span class="n">FA2</span> <span class="o">-</span> <span class="n">FA3</span>
    <span class="n">LHS4</span> <span class="o">=</span> <span class="n">FA3</span> <span class="o">-</span> <span class="n">FA5</span> <span class="o">-</span> <span class="n">FA4</span>
    <span class="n">LHS5</span> <span class="o">=</span> <span class="n">FA5</span> <span class="o">-</span> <span class="n">α</span><span class="o">*</span><span class="n">FA3</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">LHS1</span><span class="p">,</span> <span class="n">LHS2</span><span class="p">,</span> <span class="n">LHS3</span><span class="p">,</span> <span class="n">LHS4</span><span class="p">,</span> <span class="n">LHS5</span><span class="p">]</span>

<span class="c1">#################################################################################</span>
<span class="c1"># Provide initial guesses for FA1, FA2, FA3, FA4, FA5 when 0 = RHS              #</span>
<span class="c1">#################################################################################</span>

<span class="n">var_guess</span> <span class="o">=</span> <span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>

<span class="c1">#################################################################################</span>
<span class="c1"># Solve the system of equations using opt.root()                                #</span>
<span class="c1">#################################################################################</span>

<span class="n">ans2</span> <span class="o">=</span> <span class="n">opt</span><span class="o">.</span><span class="n">root</span><span class="p">(</span><span class="n">P02</span><span class="p">,</span> <span class="n">var_guess</span><span class="p">)</span>

<span class="c1">#################################################################################</span>
<span class="c1"># Extract answers for FA1, FA2, FA3, FA4, and FA5                               #</span>
<span class="c1">#################################################################################</span>

<span class="n">FA1</span><span class="p">,</span> <span class="n">FA2</span><span class="p">,</span> <span class="n">FA3</span><span class="p">,</span> <span class="n">FA4</span><span class="p">,</span> <span class="n">FA5</span> <span class="o">=</span> <span class="n">ans2</span><span class="o">.</span><span class="n">x</span>

<span class="c1">#################################################################################</span>
<span class="c1"># Calculate requested quantities for solution with α = 0.5 and VCSTR = 400L     #</span>
<span class="c1">#################################################################################</span>

<span class="n">XSP</span>    <span class="o">=</span> <span class="p">(</span><span class="n">FA1</span> <span class="o">-</span> <span class="n">FA2</span><span class="p">)</span><span class="o">/</span><span class="n">FA1</span>    <span class="c1">#single pass conversion A</span>
<span class="n">XOV</span>    <span class="o">=</span> <span class="p">(</span><span class="n">FA0</span>  <span class="o">-</span> <span class="n">FA4</span><span class="p">)</span><span class="o">/</span><span class="n">FA0</span>   <span class="c1">#overall conversion of A</span>
<span class="n">alpha</span>  <span class="o">=</span> <span class="n">FA5</span><span class="o">/</span><span class="n">FA3</span>            <span class="c1">#recycle ratio</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;XSP = </span><span class="si">{</span><span class="n">XSP</span><span class="si">:</span><span class="s1">0.3f</span><span class="si">}</span><span class="s1">, XOV = </span><span class="si">{</span><span class="n">XOV</span><span class="si">:</span><span class="s1">0.3f</span><span class="si">}</span><span class="s1">, and α = </span><span class="si">{</span><span class="n">α</span><span class="si">:</span><span class="s1">0.2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>XSP = 0.368, XOV = 0.538, and α = 0.50
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="problem-03">
<span id="example-problem-03"></span><h2>Problem 03<a class="headerlink" href="#problem-03" title="Link to this heading">#</a></h2>
<p>Now let’s make one small modification to <a class="reference internal" href="#example-problem-02">Example Problem 02</a>: we will swap the CSTR out for a Plug Flow reactor. The remaining process and reactor specifications are the same. We are still considering the irrerversible conversion of <span class="math notranslate nohighlight">\(A\)</span> into <span class="math notranslate nohighlight">\(B\)</span>:</p>
<div class="math notranslate nohighlight">
\[A \longrightarrow B\]</div>
<p>The reaction has a rate constant <span class="math notranslate nohighlight">\(k = 10 \ \textrm{s}^{-1}\)</span>, and we run it without a diluent. We are feeding species A in at a rate of 100 moles per second. The entire process is carried out at T = 573K and P = 1.0 atm. If the volume of the PFR is 400L, and we recycle 50% of the unreacted species A, calculate the single pass and overall conversion of A achieved in this process.</p>
<figure class="align-default" id="pfrrecycle">
<a class="reference internal image-reference" href="../_images/PFRRecycle.jpg"><img alt="../_images/PFRRecycle.jpg" src="../_images/PFRRecycle.jpg" style="width: 974.5px; height: 270.0px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 3 </span><span class="caption-text">Separation with recycle for propane dehydrogenation (PFR)</span><a class="headerlink" href="#pfrrecycle" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We take a very similar approach to the one we used in the <a class="reference internal" href="#solution-to-example-problem-02">Solution to Example Problem 02</a>. As above, this will result in a system of equations comprising four material balances (one on each unit operation) and one specification about the recycle ratio <span class="math notranslate nohighlight">\((\alpha = 0.5)\)</span>. We find an additional twist here in that one of our balances is a differential equation, so we can’t avoid a bit of calculus in this solution.</p>
</div>
<section id="solution-to-example-problem-03">
<span id="id4"></span><h3>Solution to Example Problem 03<a class="headerlink" href="#solution-to-example-problem-03" title="Link to this heading">#</a></h3>
<p>We write propane balances for each unit operation and a recycle specification for the splitter; this gives us a set of four algebraic equations and one ODE (PFR balance).</p>
<section id="id5">
<h4>Balance on Mixer<a class="headerlink" href="#id5" title="Link to this heading">#</a></h4>
<div class="math notranslate nohighlight">
\[ 0 = F_{A0} + F_{A5} - F_{A1} \]</div>
</section>
<section id="balance-on-pfr">
<h4>Balance on PFR<a class="headerlink" href="#balance-on-pfr" title="Link to this heading">#</a></h4>
<div class="math notranslate nohighlight">
\[ \frac{dF_A}{dV} = R_A \]</div>
</section>
<section id="id6">
<h4>Balance on Separator<a class="headerlink" href="#id6" title="Link to this heading">#</a></h4>
<div class="math notranslate nohighlight">
\[ 0 = F_{A2} - F_{A3} \]</div>
</section>
<section id="id7">
<h4>Balance on Splitter<a class="headerlink" href="#id7" title="Link to this heading">#</a></h4>
<div class="math notranslate nohighlight">
\[ 0 = F_{A3} - F_{A4} - F_{A5} \]</div>
</section>
<section id="recycle-specification">
<h4>Recycle Specification<a class="headerlink" href="#recycle-specification" title="Link to this heading">#</a></h4>
<p>We also have the recycle specification, which hasn’t changed from the last problem:</p>
<div class="math notranslate nohighlight">
\[ 0 = F_{A5} - F_{A3}\alpha\]</div>
</section>
<section id="id8">
<h4>Other Information<a class="headerlink" href="#id8" title="Link to this heading">#</a></h4>
<p>We additionally have the following information available:</p>
<div class="amsmath math notranslate nohighlight" id="equation-1a2c3da8-9d1c-4797-8e52-5a4eb55ffd69">
<span class="eqno">(5)<a class="headerlink" href="#equation-1a2c3da8-9d1c-4797-8e52-5a4eb55ffd69" title="Permalink to this equation">#</a></span>\[\begin{align}
    k &amp;= 10 \ \mathrm{s^{-1}} \\
    T &amp;= 573 \ \mathrm{K} \\
    P &amp;= 1.0 \ \mathrm{atm} \\
    V &amp;= 400 \ \mathrm{L} \\
    F_{A0} &amp;= 100 \ \mathrm{mol \ s^{-1}} 
\end{align}\]</div>
</section>
<section id="taking-stock-of-the-situation">
<h4>Taking stock of the situation<a class="headerlink" href="#taking-stock-of-the-situation" title="Link to this heading">#</a></h4>
<p>Looking at the above set of equations, we have five unknown flowrates (<span class="math notranslate nohighlight">\(F_{A1}\)</span>, <span class="math notranslate nohighlight">\(F_{A2}\)</span>, <span class="math notranslate nohighlight">\(F_{A3}\)</span>, <span class="math notranslate nohighlight">\(F_{A4}\)</span>, <span class="math notranslate nohighlight">\(F_{A5}\)</span>), four algebraic equations, and one differential equation. Before we get started, we should consider that, generally speaking, we can specify the production rate inside of the PFR in terms of molar flowrates and volumetric flowrates:</p>
<div class="amsmath math notranslate nohighlight" id="equation-6b2ba896-46e2-45ce-bcd0-21c7efa4d547">
<span class="eqno">(6)<a class="headerlink" href="#equation-6b2ba896-46e2-45ce-bcd0-21c7efa4d547" title="Permalink to this equation">#</a></span>\[\begin{align}
    R_A &amp;= -r \\
    r &amp;= kC_A \\
    C_A &amp;= \frac{F_A}{Q} \\
    Q &amp;= \frac{F_T RT}{P}
\end{align}\]</div>
<p>So although we do not yet know the production rate, it does not really constitute an additional “unknown.” This is because it can be fully expressed as a function of molar flowrates.</p>
</section>
<section id="resolving-the-pfr-balance-symbolically">
<h4>Resolving the PFR balance (symbolically)<a class="headerlink" href="#resolving-the-pfr-balance-symbolically" title="Link to this heading">#</a></h4>
<p>We don’t know the value of <span class="math notranslate nohighlight">\(F_{A1}\)</span> (the flowrate of reactant into the PFR) at this point in our solution, but that does not prevent us from developing a symbolic, analytical solution for the PFR balance in terms of <span class="math notranslate nohighlight">\(F_{A1}\)</span>. Specifically, we have as our starting point:</p>
<div class="math notranslate nohighlight">
\[ \frac{dF_A}{dV} = R_A \]</div>
<p>We can express the production rate in terms of a rate law and species concentrations as suggested above:</p>
<div class="math notranslate nohighlight">
\[ \frac{dF_A}{dV} = -kC_A \]</div>
<p>And then:</p>
<div class="math notranslate nohighlight">
\[ \frac{dF_A}{dV} = -k\frac{F_A}{Q} \]</div>
<p>For this problem, since there is no change in the number of moles throughout the PFR, we know that <span class="math notranslate nohighlight">\(Q\)</span> is fixed at the feed volumetric flowrate (to the reactor), i.e., <span class="math notranslate nohighlight">\(Q_1\)</span>.</p>
<div class="math notranslate nohighlight">
\[ \frac{dF_A}{dV} = -\frac{k}{Q_1}F_A \]</div>
<p>This is now a separable differential equation:</p>
<div class="math notranslate nohighlight">
\[ \frac{1}{F_A} dF_A = -\frac{k}{Q_1} dV \]</div>
<p>And we can solve it by integrating both the left and right hand sides over relevant limits:</p>
<div class="math notranslate nohighlight">
\[ \int_{F_{A1}}^{F_{A2}} \frac{1}{F_A} dF_A = \int_{0}^{V}-\frac{k}{Q_1} dV \]</div>
<p>This gives us the following analytical solution:</p>
<div class="math notranslate nohighlight">
\[F_{A2} = F_{A1}\exp{\left(-\frac{k}{Q_1}V\right)}\]</div>
<p>Which comprises a fifth algebraic equation:</p>
<div class="math notranslate nohighlight">
\[0 = F_{A2} - F_{A1}\exp{\left(-\frac{k}{Q_1}V\right)}\]</div>
<p>We can now solve the system of 5 algebraic equations and 5 unknowns <span class="math notranslate nohighlight">\((F_{A1}, \ F_{A2}, \ F_{A3}, \ F_{A4}, \ F_{A5})\)</span> using <code class="docutils literal notranslate"><span class="pre">opt.root()</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">################################################################################</span>
<span class="c1"># Define the system of algebraic equations that describes the Process          #</span>
<span class="c1"># It has the form f([FA1, FA2, FA3, FA4, FA5])                                 #</span>
<span class="c1"># It returns the LHS of the 5 algebraic equations                              # </span>
<span class="c1">################################################################################</span>

<span class="k">def</span><span class="w"> </span><span class="nf">P03</span><span class="p">(</span><span class="n">var</span><span class="p">):</span>
    <span class="n">FA1</span><span class="p">,</span> <span class="n">FA2</span><span class="p">,</span> <span class="n">FA3</span><span class="p">,</span> <span class="n">FA4</span><span class="p">,</span> <span class="n">FA5</span> <span class="o">=</span> <span class="n">var</span>
    
    <span class="n">Q1</span>   <span class="o">=</span> <span class="n">FA1</span><span class="o">*</span><span class="n">R</span><span class="o">*</span><span class="n">T</span><span class="o">/</span><span class="n">P</span><span class="p">;</span>     
    <span class="n">LHS1</span> <span class="o">=</span> <span class="n">FA0</span> <span class="o">+</span> <span class="n">FA5</span> <span class="o">-</span> <span class="n">FA1</span>
    <span class="n">LHS2</span> <span class="o">=</span> <span class="n">FA2</span> <span class="o">-</span> <span class="n">FA1</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">k</span><span class="o">/</span><span class="n">Q1</span><span class="o">*</span><span class="n">V</span><span class="p">)</span>
    <span class="n">LHS3</span> <span class="o">=</span> <span class="n">FA2</span> <span class="o">-</span> <span class="n">FA3</span>
    <span class="n">LHS4</span> <span class="o">=</span> <span class="n">FA3</span> <span class="o">-</span> <span class="n">FA5</span> <span class="o">-</span> <span class="n">FA4</span>
    <span class="n">LHS5</span> <span class="o">=</span> <span class="n">FA5</span> <span class="o">-</span> <span class="n">α</span><span class="o">*</span><span class="n">FA3</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">LHS1</span><span class="p">,</span> <span class="n">LHS2</span><span class="p">,</span> <span class="n">LHS3</span><span class="p">,</span> <span class="n">LHS4</span><span class="p">,</span> <span class="n">LHS5</span><span class="p">]</span>

<span class="c1">#################################################################################</span>
<span class="c1"># Provide initial guesses for FA1, FA2, FA3, FA4, FA5 when 0 = RHS              #</span>
<span class="c1">#################################################################################</span>

<span class="n">var_guess</span> <span class="o">=</span> <span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>

<span class="c1">#################################################################################</span>
<span class="c1"># Solve the system of equations using opt.root()                                #</span>
<span class="c1">#################################################################################</span>

<span class="n">ans3</span> <span class="o">=</span> <span class="n">opt</span><span class="o">.</span><span class="n">root</span><span class="p">(</span><span class="n">P03</span><span class="p">,</span> <span class="n">var_guess</span><span class="p">)</span>

<span class="c1">#################################################################################</span>
<span class="c1"># Extract answers for FA1, FA2, FA3, FA4, and FA5                               #</span>
<span class="c1">#################################################################################</span>

<span class="n">FA1</span><span class="p">,</span> <span class="n">FA2</span><span class="p">,</span> <span class="n">FA3</span><span class="p">,</span> <span class="n">FA4</span><span class="p">,</span> <span class="n">FA5</span> <span class="o">=</span> <span class="n">ans3</span><span class="o">.</span><span class="n">x</span>

<span class="c1">#################################################################################</span>
<span class="c1"># Calculate requested quantities for solution with α = 0.5 and VPFR = 400L     #</span>
<span class="c1">#################################################################################</span>

<span class="n">XSP</span>    <span class="o">=</span> <span class="p">(</span><span class="n">FA1</span> <span class="o">-</span> <span class="n">FA2</span><span class="p">)</span><span class="o">/</span><span class="n">FA1</span>    <span class="c1">#single pass conversion A</span>
<span class="n">XOV</span>    <span class="o">=</span> <span class="p">(</span><span class="n">FA0</span>  <span class="o">-</span> <span class="n">FA4</span><span class="p">)</span><span class="o">/</span><span class="n">FA0</span>   <span class="c1">#overall conversion of A</span>
<span class="n">alpha</span>  <span class="o">=</span> <span class="n">FA5</span><span class="o">/</span><span class="n">FA3</span>            <span class="c1">#recycle ratio</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;XSP = </span><span class="si">{</span><span class="n">XSP</span><span class="si">:</span><span class="s1">0.3f</span><span class="si">}</span><span class="s1">, XOV = </span><span class="si">{</span><span class="n">XOV</span><span class="si">:</span><span class="s1">0.3f</span><span class="si">}</span><span class="s1">, and α = </span><span class="si">{</span><span class="n">α</span><span class="si">:</span><span class="s1">0.2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>XSP = 0.463, XOV = 0.633, and α = 0.50
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="problem-04">
<h2>Problem 04<a class="headerlink" href="#problem-04" title="Link to this heading">#</a></h2>
<p>For the above case in <a class="reference internal" href="#example-problem-03">Example Problem 03</a>, things aren’t so bad despite the differential equation that shows up when we initially write balances. We have first order kinetics and a constant volumetric flowrate; further, we know the size of the reactor!. This means that the PFR balance can be solved analytically, and we can replace the differential equation with an algebraic one and proceed as normal with an equation solver.</p>
<p>What happens if we have to deal with more difficult kinetics?  For this example, let’s stick with the simple reaction:</p>
<div class="math notranslate nohighlight">
\[A \longrightarrow B\]</div>
<p>But we’ll say that it has a complex rate law:</p>
<div class="math notranslate nohighlight">
\[r = \frac{kC_A}{1+KC_A}\]</div>
<p>Where <span class="math notranslate nohighlight">\(k = 10 \ \textrm{s}^{-1}\)</span> as before and <span class="math notranslate nohighlight">\(K = 17.5 \ \textrm{L} \ \textrm{mol}^{-1}\)</span>. Otherwise, the problem is identical. We are feeding species <span class="math notranslate nohighlight">\(A\)</span> in at a rate of <span class="math notranslate nohighlight">\(100 \ \mathrm{mol \ s^{-1}}\)</span>. The entire process is carried out at <span class="math notranslate nohighlight">\(T = 573K\)</span> and <span class="math notranslate nohighlight">\(P = 1.0 \ \mathrm{atm}\)</span>. If the volume of the PFR is 400L, and we recycle 50% of the unreacted species <span class="math notranslate nohighlight">\(A\)</span>, calculate the single pass and overall conversion of <span class="math notranslate nohighlight">\(A\)</span> achieved in this process.</p>
<p>We still need to solve a system of algebraic equations as above, but the catch now is that the differential equation that describes the PFR balance is more cumbersome to solve. I don’t know an analytical solution offhand. We <em>could</em> develop one after separating variables. That said, in my opinion, it will be easier and cleaner to use numerical methods to integrate it. For this solution, we’ll use <code class="docutils literal notranslate"><span class="pre">solve_ivp()</span></code> because it is relatively easy to implement a Runge-Kutta method here since we know the upper limit of integration (V = 400L). You could also do this with Gaussian Quadrature, but I prefer the <code class="docutils literal notranslate"><span class="pre">solve_ivp()</span></code> approach as it is easier to extend to more difficult systems that involve several coupled ODEs. This is an important technique to learn because you will not always be able to solve ODEs analytically.</p>
<section id="id9">
<h3>Solution to Example Problem 03<a class="headerlink" href="#id9" title="Link to this heading">#</a></h3>
<p>We start by writing balances on each unit operation and a recycle specification; this gives us a set of four algebraic equations and one ODE. This is the same general situation as we encountered in the <a class="reference internal" href="#solution-to-example-problem-03">Solution to Example Problem 03</a>, but the ODE is more difficult to solve analytically. Instead, we will use a numerical method. This is one approach for doing so.</p>
<section id="id10">
<h4>Balance on Mixer<a class="headerlink" href="#id10" title="Link to this heading">#</a></h4>
<div class="math notranslate nohighlight">
\[ 0 = F_{A0} + F_{A5} - F_{A1} \]</div>
</section>
<section id="id11">
<h4>Balance on PFR<a class="headerlink" href="#id11" title="Link to this heading">#</a></h4>
<div class="math notranslate nohighlight">
\[ \frac{dF_A}{dV} = R_A \]</div>
</section>
<section id="id12">
<h4>Balance on Separator<a class="headerlink" href="#id12" title="Link to this heading">#</a></h4>
<div class="math notranslate nohighlight">
\[ 0 = F_{A2} - F_{A3} \]</div>
</section>
<section id="id13">
<h4>Balance on Splitter<a class="headerlink" href="#id13" title="Link to this heading">#</a></h4>
<div class="math notranslate nohighlight">
\[ 0 = F_{A3} - F_{A4} - F_{A5} \]</div>
</section>
<section id="id14">
<h4>Recycle Specification<a class="headerlink" href="#id14" title="Link to this heading">#</a></h4>
<p>We also have the recycle specification, which hasn’t changed from the last problem:</p>
<div class="math notranslate nohighlight">
\[ 0 = F_{A5} - F_{A3}\alpha\]</div>
</section>
<section id="id15">
<h4>Other Information<a class="headerlink" href="#id15" title="Link to this heading">#</a></h4>
<p>We additionally have the following information available:</p>
<div class="amsmath math notranslate nohighlight" id="equation-22569477-2f96-495a-a47c-587451b4d4db">
<span class="eqno">(7)<a class="headerlink" href="#equation-22569477-2f96-495a-a47c-587451b4d4db" title="Permalink to this equation">#</a></span>\[\begin{align}
    k &amp;= 10 \ \mathrm{s^{-1}} \\
    K &amp;= 17.5 \ \mathrm{mol \ L^{-1}} \\
    T &amp;= 573 \ \mathrm{K} \\
    P &amp;= 1.0 \ \mathrm{atm} \\
    V &amp;= 400 \ \mathrm{L} \\
    F_{A0} &amp;= 100 \ \mathrm{mol \ s^{-1}} 
\end{align}\]</div>
</section>
<section id="id16">
<h4>Taking stock of the situation<a class="headerlink" href="#id16" title="Link to this heading">#</a></h4>
<p>Looking at the above set of equations, we have five unknown flowrates (<span class="math notranslate nohighlight">\(F_{A1}\)</span>, <span class="math notranslate nohighlight">\(F_{A2}\)</span>, <span class="math notranslate nohighlight">\(F_{A3}\)</span>, <span class="math notranslate nohighlight">\(F_{A4}\)</span>, <span class="math notranslate nohighlight">\(F_{A5}\)</span>), four algebraic equations, and one differential equation.</p>
</section>
<section id="resolving-the-pfr-balance-numerically">
<h4>Resolving the PFR balance (numerically)<a class="headerlink" href="#resolving-the-pfr-balance-numerically" title="Link to this heading">#</a></h4>
<p>We don’t know the value of <span class="math notranslate nohighlight">\(F_{A1}\)</span> (the flowrate of reactant into the PFR) at this point. In the context of the algebraic equations above, it is an <em>unknown</em>. If we’re clever about it, we can actually embed a numerical solution of that ODE into our system of algebraic equations in order to solve this problem….let’s start with the PFR material balance:</p>
<div class="math notranslate nohighlight">
\[ \frac{dF_A}{dV} = R_A \]</div>
<p>We can express the production rate in terms of a rate law and thus species concentrations:</p>
<div class="math notranslate nohighlight">
\[ \frac{dF_A}{dV} = -\frac{kC_A}{1+KC_A} \]</div>
<p>And the concentration of species <span class="math notranslate nohighlight">\(A\)</span> can be defined in terms of flowrates:</p>
<div class="math notranslate nohighlight">
\[C_A = \frac{F_A}{Q}\]</div>
<p>For this problem, since there is no change in the number of moles throughout the PFR, we know that $<span class="math notranslate nohighlight">\(Q\)</span> is fixed at the feed volumetric flowrate (to the reactor), i.e., <span class="math notranslate nohighlight">\(Q_1\)</span>.</p>
<div class="math notranslate nohighlight">
\[C_A = \frac{F_A}{Q_1}\]</div>
<p>We’ll solve this numerically now.  The key thing to remember is that the inlet flowrate to the PFR is unknown…so the algebraic solver is iterating the value of <span class="math notranslate nohighlight">\(F_{A1}\)</span> until it finds a solution to our 5 equations.  But the balance on the PFR has to be evaluated numerically; hence the need to use a <code class="docutils literal notranslate"><span class="pre">solve_ivp()</span></code> solution on every pass through the algebraic equations.</p>
<p>Now we have 5 equations and 5 unknowns (<span class="math notranslate nohighlight">\(F_{A1}\)</span>, <span class="math notranslate nohighlight">\(F_{A2}\)</span>, <span class="math notranslate nohighlight">\(F_{A3}\)</span>, <span class="math notranslate nohighlight">\(F_{A4}\)</span>, <span class="math notranslate nohighlight">\(F_{A5}\)</span>); we can solve this with <code class="docutils literal notranslate"><span class="pre">opt.root()</span></code> as long as we use <code class="docutils literal notranslate"><span class="pre">solve_ivp()</span></code> to solve the material balance on the PFR for each value of <span class="math notranslate nohighlight">\(F_{A1}\)</span> on each iteration of the <code class="docutils literal notranslate"><span class="pre">opt.root()</span></code> solver
<br>
<br>
<br></p>
<div style="font-size: 75px;text-align: center;"> &#129327;</div>
<br>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic simple">
<li><p>If I had been given the single pass conversion instead, it would be slightly easier to use <code class="docutils literal notranslate"><span class="pre">quadgk()</span></code> for this particular problem</p></li>
<li><p>If I have a more difficult reaction (nonconstant Q, multiple reactions, etc.), it would be necessary to use <code class="docutils literal notranslate"><span class="pre">solve_ivp()</span></code> or something similar, so I think this is the more general approach.</p></li>
</ol>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">################################################################################</span>
<span class="c1"># Defining new global constants for Example Problem 04                         #</span>
<span class="c1">################################################################################</span>

<span class="n">K</span>   <span class="o">=</span> <span class="mf">17.5</span>    <span class="c1">#mol/L</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">################################################################################</span>
<span class="c1"># Define the system of algebraic equations that describes the Process          #</span>
<span class="c1"># It has the form f([FA1, FA2, FA3, FA4, FA5])                                 #</span>
<span class="c1"># It returns the LHS of the 5 algebraic equations                              # </span>
<span class="c1">################################################################################</span>

<span class="k">def</span><span class="w"> </span><span class="nf">P04</span><span class="p">(</span><span class="n">var</span><span class="p">):</span>
    <span class="n">FA1</span><span class="p">,</span> <span class="n">FA2</span><span class="p">,</span> <span class="n">FA3</span><span class="p">,</span> <span class="n">FA4</span><span class="p">,</span> <span class="n">FA5</span> <span class="o">=</span> <span class="n">var</span>

    <span class="n">Q1</span>  <span class="o">=</span> <span class="n">FA1</span><span class="o">*</span><span class="n">R</span><span class="o">*</span><span class="n">T</span><span class="o">/</span><span class="n">P</span>

    <span class="n">vspan</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">V</span><span class="p">)</span>
    <span class="n">var0</span>  <span class="o">=</span> <span class="n">FA1</span>
    <span class="n">ans</span>   <span class="o">=</span> <span class="n">solve_ivp</span><span class="p">(</span><span class="n">odemodel</span><span class="p">,</span> <span class="n">vspan</span><span class="p">,</span> <span class="p">[</span><span class="n">var0</span><span class="p">],</span> <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="n">Q1</span><span class="p">,</span> <span class="p">))</span> <span class="c1">#To determine the exit flowrate of the PFR, we need to solve an ODE...</span>
    <span class="n">FPFR</span>  <span class="o">=</span> <span class="n">ans</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
      
    <span class="n">LHS1</span> <span class="o">=</span> <span class="n">FA0</span> <span class="o">+</span> <span class="n">FA5</span> <span class="o">-</span> <span class="n">FA1</span>
    <span class="n">LHS2</span> <span class="o">=</span> <span class="n">FA2</span> <span class="o">-</span> <span class="n">FPFR</span>
    <span class="n">LHS3</span> <span class="o">=</span> <span class="n">FA2</span> <span class="o">-</span> <span class="n">FA3</span>
    <span class="n">LHS4</span> <span class="o">=</span> <span class="n">FA3</span> <span class="o">-</span> <span class="n">FA5</span> <span class="o">-</span> <span class="n">FA4</span>
    <span class="n">LHS5</span> <span class="o">=</span> <span class="n">FA5</span> <span class="o">-</span> <span class="n">α</span><span class="o">*</span><span class="n">FA3</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">LHS1</span><span class="p">,</span> <span class="n">LHS2</span><span class="p">,</span> <span class="n">LHS3</span><span class="p">,</span> <span class="n">LHS4</span><span class="p">,</span> <span class="n">LHS5</span><span class="p">]</span>

<span class="c1">################################################################################</span>
<span class="c1"># Define the ODE that describes the PFR                                        #</span>
<span class="c1"># It has the form f(V, [FA], Q1)                                               #</span>
<span class="c1"># It returns [dFAdV]                                                           # </span>
<span class="c1"># Q1 is passed as a parameter because it depends on FA1, which is unknown      #</span>
<span class="c1"># The algebraic solver is varying FA1, so Q1 changes on each pass              #</span>
<span class="c1">################################################################################</span>

<span class="k">def</span><span class="w"> </span><span class="nf">odemodel</span><span class="p">(</span><span class="n">vol</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">par</span><span class="p">):</span>
    <span class="n">FA</span> <span class="o">=</span> <span class="n">var</span>
    <span class="n">Q1</span> <span class="o">=</span> <span class="n">par</span>
    <span class="n">CA</span> <span class="o">=</span> <span class="n">FA</span><span class="o">/</span><span class="n">Q1</span>
    <span class="n">D</span>  <span class="o">=</span> <span class="o">-</span><span class="n">k</span><span class="o">*</span><span class="n">CA</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">K</span><span class="o">*</span><span class="n">CA</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">D</span>

<span class="c1">#################################################################################</span>
<span class="c1"># Provide initial guesses for FA1, FA2, FA3, FA4, FA5 when 0 = RHS              #</span>
<span class="c1">#################################################################################</span>

<span class="n">var_guess</span> <span class="o">=</span> <span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>

<span class="c1">#################################################################################</span>
<span class="c1"># Solve the system of equations using opt.root()                                #</span>
<span class="c1">#################################################################################</span>

<span class="n">ans4</span> <span class="o">=</span> <span class="n">opt</span><span class="o">.</span><span class="n">root</span><span class="p">(</span><span class="n">P04</span><span class="p">,</span> <span class="n">var_guess</span><span class="p">)</span>

<span class="c1">#################################################################################</span>
<span class="c1"># Extract answers for FA1, FA2, FA3, FA4, and FA5                               #</span>
<span class="c1">#################################################################################</span>

<span class="n">FA1</span><span class="p">,</span> <span class="n">FA2</span><span class="p">,</span> <span class="n">FA3</span><span class="p">,</span> <span class="n">FA4</span><span class="p">,</span> <span class="n">FA5</span> <span class="o">=</span> <span class="n">ans4</span><span class="o">.</span><span class="n">x</span>

<span class="c1">#################################################################################</span>
<span class="c1"># Calculate requested quantities for solution with α = 0.5 and VPFR = 400L     #</span>
<span class="c1">#################################################################################</span>

<span class="n">XSP</span>    <span class="o">=</span> <span class="p">(</span><span class="n">FA1</span> <span class="o">-</span> <span class="n">FA2</span><span class="p">)</span><span class="o">/</span><span class="n">FA1</span>
<span class="n">XOV</span>    <span class="o">=</span> <span class="p">(</span><span class="n">FA0</span>  <span class="o">-</span> <span class="n">FA4</span><span class="p">)</span><span class="o">/</span><span class="n">FA0</span>
<span class="n">alpha</span>  <span class="o">=</span> <span class="n">FA5</span><span class="o">/</span><span class="n">FA3</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;XSP = </span><span class="si">{</span><span class="n">XSP</span><span class="si">:</span><span class="s1">0.3f</span><span class="si">}</span><span class="s1">, XOV = </span><span class="si">{</span><span class="n">XOV</span><span class="si">:</span><span class="s1">0.3f</span><span class="si">}</span><span class="s1">, and α = </span><span class="si">{</span><span class="n">α</span><span class="si">:</span><span class="s1">0.2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>XSP = 0.359, XOV = 0.528, and α = 0.50
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./Notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../Chapter2.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Lectures</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-problem-01-a-recap-of-the-propane-dehydrogenation-example-from-notebook-34">Example Problem 01: A Recap of the Propane Dehydrogenation Example from Notebook 34</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#solution-to-example-problem-01">Solution to Example Problem 01</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analysis-of-the-overall-process">Analysis of the overall process</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analysis-of-the-splitter">Analysis of the Splitter</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analysis-of-the-separator">Analysis of the separator</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analysis-of-the-mixer">Analysis of the mixer</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analysis-of-the-reactor">Analysis of the reactor</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#this-was-an-easy-problem">This was an easy problem…</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-problem-02">Example Problem 02</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#solution-to-example-problem-02">Solution to Example Problem 02</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#balance-on-mixer">Balance on Mixer</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#balance-on-cstr">Balance on CSTR</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#balance-on-separator">Balance on Separator</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#balance-on-splitter">Balance on Splitter</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#other-information">Other Information</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-03">Problem 03</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#solution-to-example-problem-03">Solution to Example Problem 03</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Balance on Mixer</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#balance-on-pfr">Balance on PFR</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">Balance on Separator</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">Balance on Splitter</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#recycle-specification">Recycle Specification</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">Other Information</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#taking-stock-of-the-situation">Taking stock of the situation</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#resolving-the-pfr-balance-symbolically">Resolving the PFR balance (symbolically)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-04">Problem 04</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">Solution to Example Problem 03</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">Balance on Mixer</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">Balance on PFR</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">Balance on Separator</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">Balance on Splitter</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">Recycle Specification</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">Other Information</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">Taking stock of the situation</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#resolving-the-pfr-balance-numerically">Resolving the PFR balance (numerically)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jesse Q. Bond, Syracuse University
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>